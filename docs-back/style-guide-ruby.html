<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Asciidoctor 1.5.4">
  <title>The Ruby Style Guide</title>
  <link rel="stylesheet" href="https://asciidoclive.com/assets/asciidoctor.js/css/asciidoctor.css">
</head>

<body class="article">
  <div id="header">
  </div>
  <div id="content">
    <div class="paragraph">
      <p>#Ruby Style Guide Based on <strong>RuboCop</strong> <a href="https://github.com/rubocop-hq/ruby-style-guide">GitHub</a>        | <a href="https://rubystyle.guide">Web</a></p>
    </div>
    <h1 id="_the_ruby_style_guide" class="sect0">The Ruby Style Guide</h1>
    <div class="sect1">
      <h2 id="introduction">
        <a class="anchor" href="#introduction"></a>Introduction</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>This Ruby style guide recommends best practices so that real-world Ruby
            programmers can write code that can be maintained by other real-world
            Ruby programmers. A style guide that reflects real-world usage gets used,
            while a style guide that holds to an ideal that has been rejected by
            the people it is supposed to help risks not getting used at all - no
            matter how good it is.</p>
        </div>
        <div class="paragraph">
          <p>The guide is separated into several sections of related guidelines. We&#8217;ve
            tried to add the rationale behind the guidelines (if it&#8217;s omitted
            we&#8217;ve assumed it&#8217;s pretty obvious).</p>
        </div>
        <div class="admonitionblock tip">
          <table>
            <tr>
              <td class="icon">
                <div class="title">Tip</div>
              </td>
              <td class="content">
                <div class="paragraph">
                  <p>If you&#8217;re into Rails or RSpec you might want to check out
                    the complementary <a href="https://github.com/rubocop-hq/rails-style-guide">Ruby on Rails Style Guide</a>                    and <a href="https://github.com/rubocop-hq/rspec-style-guide">RSpec Style Guide</a>.</p>
                </div>
              </td>
            </tr>
          </table>
        </div>
        <div class="admonitionblock tip">
          <table>
            <tr>
              <td class="icon">
                <div class="title">Tip</div>
              </td>
              <td class="content">
                <a href="https://github.com/rubocop-hq/rubocop">RuboCop</a> is a
                static code analyzer (linter) and formatter, based on this style
                guide.
              </td>
            </tr>
          </table>
        </div>
        <div class="sect2">
          <h3 id="guiding-principles">
            <a class="anchor" href="#guiding-principles"></a>Guiding Principles</h3>
          <div class="paragraph">
            <p>The guidelines provided here are intended to improve the readability
              of code and make it consistent across the wide spectrum of Ruby code.
              They are also meant to reflect real-world usage of Ruby instead of
              a random ideal. When we had to choose between a very established practice
              and a subjectively better alternative we&#8217;ve opted to recommend
              the established practice.<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup></p>
          </div>
          <div class="paragraph">
            <p>There are some areas in which there is no clear consensus in the Ruby
              community regarding a particular style (like string literal quoting,
              spacing inside hash literals, dot position in multi-line method chaining,
              etc.). In such scenarios all popular styles are acknowledged and it&#8217;s
              up to you to pick one and apply it consistently.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="a-note-about-consistency">
            <a class="anchor" href="#a-note-about-consistency"></a>A Note about Consistency</h3>
          <div class="paragraph">
            <p>A style guide is about consistency. Consistency with this style guide
              is important. Consistency within a project is more important. Consistency
              within one class or method is the most important.</p>
          </div>
          <div class="paragraph">
            <p>However, know when to be inconsistent&#8201;&#8212;&#8201;sometimes style
              guide recommendations just aren&#8217;t applicable. When in doubt,
              use your best judgment. Look at other examples and decide what looks
              best. And don&#8217;t hesitate to ask!</p>
          </div>
          <div class="paragraph">
            <p>Some other good reasons to ignore a particular guideline:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>When applying the guideline would make the code less readable, even
                  for someone who is used to reading code that follows this style
                  guide.</p>
              </li>
              <li>
                <p>To be consistent with surrounding code that also breaks it (maybe
                  for historic reasons)&#8201;&#8212;&#8201;although this is also
                  an opportunity to clean up someone else&#8217;s mess (in true XP
                  style).</p>
              </li>
              <li>
                <p>Because the code in question predates the introduction of the guideline
                  and there is no other reason to be modifying that code.</p>
              </li>
              <li>
                <p>When the code needs to remain compatible with older versions of Ruby
                  that don&#8217;t support the feature recommended by the style guide.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="source-code-layout">
        <a class="anchor" href="#source-code-layout"></a>Source Code Layout</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="utf-8">
            <a class="anchor" href="#utf-8"></a>Source Encoding</h3>
          <div class="paragraph">
            <p>Use <code>UTF-8</code> as the source file encoding.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="tabs-or-spaces">
            <a class="anchor" href="#tabs-or-spaces"></a>Tabs or Spaces?</h3>
          <div class="paragraph">
            <p>Use only spaces for indentation. No hard tabs.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="spaces-indentation">
            <a class="anchor" href="#spaces-indentation"></a>Indentation</h3>
          <div class="paragraph">
            <p>Use two <strong>spaces</strong> per indentation level (aka soft tabs).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - four spaces
def some_method
    do_something
end

# good
def some_method
  do_something
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="max-line-length">
            <a class="anchor" href="#max-line-length"></a>Maximum Line Length</h3>
          <div class="paragraph">
            <p>Limit lines to 80 characters.</p>
          </div>
          <div class="admonitionblock tip">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Tip</div>
                </td>
                <td class="content">
                  Most editors and IDEs have configurations options to help you with that. They would
                  typically highlight lines that exceed the length limit.
                </td>
              </tr>
            </table>
          </div>
          <div class="sidebarblock">
            <div class="content">
              <div class="title">Why Bother with 80 characters in a World of Modern Widescreen Displays?</div>
              <div class="paragraph">
                <p>A lot of people these days feel that a maximum line length of 80
                  characters is just a remnant of the past and makes little sense
                  today. Still, there are some important benefits to be gained from
                  sticking to shorter lines of code.</p>
              </div>
              <div class="paragraph">
                <p>First, and foremost - numerous studies have shown that humans read
                  much faster vertically and very long lines of text impede the reading
                  process. As noted earlier, one of the guiding principles of this
                  style guide is to optimize the code we write for human consumption.</p>
              </div>
              <div class="paragraph">
                <p>Some teams strongly prefer a longer line length. For code maintained
                  exclusively or primarily by a team that can reach agreement on
                  this issue, it is okay to increase the line length limit up to
                  100 characters, or all the way up to 120 characters.</p>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-trailing-whitespace">
            <a class="anchor" href="#no-trailing-whitespace"></a>No Trailing Whitespace</h3>
          <div class="paragraph">
            <p>Avoid trailing whitespace.</p>
          </div>
          <div class="admonitionblock tip">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Tip</div>
                </td>
                <td class="content">
                  Most editors and IDEs have configuration options to visualize trailing whitespace
                  and to remove it automatically on save.
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="sect2">
          <h3 id="crlf">
            <a class="anchor" href="#crlf"></a>Line Endings</h3>
          <div class="paragraph">
            <p>Use Unix-style line endings.<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnote_2" title="View footnote.">2</a>]</sup></p>
          </div>
          <div class="admonitionblock tip">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Tip</div>
                </td>
                <td class="content">
                  <div class="paragraph">
                    <p>If you&#8217;re using Git you might want to add the following
                      configuration setting to protect your project from Windows
                      line endings creeping in:</p>
                  </div>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="highlight"><code class="language-bash" data-lang="bash">$ git config --global core.autocrlf true</code></pre>
                    </div>
                  </div>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="sect2">
          <h3 id="newline-eof">
            <a class="anchor" href="#newline-eof"></a>Should I Terminate Files with a Newline?</h3>
          <div class="paragraph">
            <p>End each file with a newline.</p>
          </div>
          <div class="admonitionblock tip">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Tip</div>
                </td>
                <td class="content">
                  This should be done by through editor configuration, not manually.
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-semicolon">
            <a class="anchor" href="#no-semicolon"></a>Should I Terminate Expressions with <code>;</code>?</h3>
          <div class="paragraph">
            <p>Don&#8217;t use <code>;</code> to terminate statements and expressions.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
puts 'foobar'; # superfluous semicolon

# good
puts 'foobar'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="one-expression-per-line">
            <a class="anchor" href="#one-expression-per-line"></a>One Expression Per Line</h3>
          <div class="paragraph">
            <p>Use one expression per line.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
puts 'foo'; puts 'bar' # two expressions on the same line

# good
puts 'foo'
puts 'bar'

puts 'foo', 'bar' # this applies to puts in particular</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="spaces-operators">
            <a class="anchor" href="#spaces-operators"></a>Spaces and Operators</h3>
          <div class="paragraph">
            <p>Use spaces around operators, after commas, colons and semicolons. Whitespace
              might be (mostly) irrelevant to the Ruby interpreter, but its proper
              use is the key to writing easily readable code.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
sum=1+2
a,b=1,2
class FooError&lt;StandardError;end

# good
sum = 1 + 2
a, b = 1, 2
class FooError &lt; StandardError; end</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>There are a few exceptions:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>Exponent operator:</p>
              </li>
            </ul>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
e = M * c ** 2

# good
e = M * c**2</code></pre>
            </div>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>Slash in rational literals:</p>
              </li>
            </ul>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
o_scale = 1 / 48r

# good
o_scale = 1/48r</code></pre>
            </div>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>Safe navigation operator:</p>
              </li>
            </ul>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
foo &amp;. bar
foo &amp;.bar
foo&amp;. bar

# good
foo&amp;.bar</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="spaces-braces">
            <a class="anchor" href="#spaces-braces"></a>Spaces and Braces</h3>
          <div class="paragraph">
            <p>No spaces after <code>(</code>, <code>[</code> or before <code>]</code>,
              <code>)</code>. Use spaces around <code>{</code> and before <code>}</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
some( arg ).other
[ 1, 2, 3 ].each{|e| puts e}

# good
some(arg).other
[1, 2, 3].each { |e| puts e }</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p><code>{</code> and <code>}</code> deserve a bit of clarification, since
              they are used for block and hash literals, as well as string interpolation.</p>
          </div>
          <div class="paragraph">
            <p>For hash literals two styles are considered acceptable. The first variant
              is slightly more readable (and arguably more popular in the Ruby community
              in general). The second variant has the advantage of adding visual
              difference between block and hash literals. Whichever one you pick
              - apply it consistently.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># good - space after { and before }
{ one: 1, two: 2 }

# good - no space after { and before }
{one: 1, two: 2}</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>With interpolated expressions, there should be no padded-spacing inside
              the braces.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
"From: #{ user.first_name }, #{ user.last_name }"

# good
"From: #{user.first_name}, #{user.last_name}"</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-space-bang">
            <a class="anchor" href="#no-space-bang"></a>No Space after Bang</h3>
          <div class="paragraph">
            <p>No space after <code>!</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
! something

# good
!something</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-space-inside-range-literals">
            <a class="anchor" href="#no-space-inside-range-literals"></a>No Space inside Range Literals</h3>
          <div class="paragraph">
            <p>No space inside range literals.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
1 .. 3
'a' ... 'z'

# good
1..3
'a'...'z'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="indent-when-to-case">
            <a class="anchor" href="#indent-when-to-case"></a>Indent <code>when</code> to <code>case</code></h3>
          <div class="paragraph">
            <p>Indent <code>when</code> as deep as <code>case</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
case
  when song.name == 'Misty'
    puts 'Not again!'
  when song.duration &gt; 120
    puts 'Too long!'
  when Time.now.hour &gt; 21
    puts "It's too late"
  else
    song.play
end

# good
case
when song.name == 'Misty'
  puts 'Not again!'
when song.duration &gt; 120
  puts 'Too long!'
when Time.now.hour &gt; 21
  puts "It's too late"
else
  song.play
end</code></pre>
            </div>
          </div>
          <div class="sidebarblock">
            <div class="content">
              <div class="title">A Bit of History</div>
              <div class="paragraph">
                <p>This is the style established in both "The Ruby Programming Language"
                  and "Programming Ruby". Historically it is derived from the fact
                  that <code>case</code> and <code>switch</code> statements are not
                  blocks, hence should not be indented, and the <code>when</code>                  and <code>else</code> keywords are labels (compiled in the C language,
                  they are literally labels for <code>JMP</code> calls).</p>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="indent-conditional-assignment">
            <a class="anchor" href="#indent-conditional-assignment"></a>Indent Conditional Assignment</h3>
          <div class="paragraph">
            <p>When assigning the result of a conditional expression to a variable,
              preserve the usual alignment of its branches.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - pretty convoluted
kind = case year
when 1850..1889 then 'Blues'
when 1890..1909 then 'Ragtime'
when 1910..1929 then 'New Orleans Jazz'
when 1930..1939 then 'Swing'
when 1940..1950 then 'Bebop'
else 'Jazz'
end

result = if some_cond
  calc_something
else
  calc_something_else
end

# good - it's apparent what's going on
kind = case year
       when 1850..1889 then 'Blues'
       when 1890..1909 then 'Ragtime'
       when 1910..1929 then 'New Orleans Jazz'
       when 1930..1939 then 'Swing'
       when 1940..1950 then 'Bebop'
       else 'Jazz'
       end

result = if some_cond
           calc_something
         else
           calc_something_else
         end

# good (and a bit more width efficient)
kind =
  case year
  when 1850..1889 then 'Blues'
  when 1890..1909 then 'Ragtime'
  when 1910..1929 then 'New Orleans Jazz'
  when 1930..1939 then 'Swing'
  when 1940..1950 then 'Bebop'
  else 'Jazz'
  end

result =
  if some_cond
    calc_something
  else
    calc_something_else
  end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="empty-lines-between-methods">
            <a class="anchor" href="#empty-lines-between-methods"></a>Empty Lines between Methods</h3>
          <div class="paragraph">
            <p>Use empty lines between method definitions and also to break up methods
              into logical paragraphs internally.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">def some_method
  data = initialize(options)

  data.manipulate!

  data.result
end

def some_method
  result
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="two-or-more-empty-lines">
            <a class="anchor" href="#two-or-more-empty-lines"></a>Two or More Empty Lines</h3>
          <div class="paragraph">
            <p>Don&#8217;t use several empty lines in a row.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - It has two empty lines.
some_method


some_method

# good
some_method

some_method</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="empty-lines-around-attribute-accessor">
            <a class="anchor" href="#empty-lines-around-attribute-accessor"></a>Empty Lines around Attribute Accessor</h3>
          <div class="paragraph">
            <p>Use empty lines around attribute accessor.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class Foo
  attr_reader :foo
  def foo
    # do something...
  end
end

# good
class Foo
  attr_reader :foo

  def foo
    # do something...
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="empty-lines-around-access-modifier">
            <a class="anchor" href="#empty-lines-around-access-modifier"></a>Empty Lines around Access Modifier</h3>
          <div class="paragraph">
            <p>Use empty lines around attribute modifier.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class Foo
  def bar; end
  private
  def baz; end
end

# good
class Foo
  def bar; end

  private

  def baz; end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="empty-lines-around-bodies">
            <a class="anchor" href="#empty-lines-around-bodies"></a>Empty Lines around Bodies</h3>
          <div class="paragraph">
            <p>Don&#8217;t use empty lines around method, class, module, block bodies.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class Foo

  def foo

    begin

      do_something do

        something

      end

    rescue

      something

    end

  end

end

# good
class Foo
  def foo
    begin
      do_something do
        something
      end
    rescue
      something
    end
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-trailing-params-comma">
            <a class="anchor" href="#no-trailing-params-comma"></a>Trailing Comma in Method Arguments</h3>
          <div class="paragraph">
            <p>Avoid comma after the last parameter in a method call, especially when
              the parameters are not on separate lines.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - easier to move/add/remove parameters, but still not preferred
some_method(
  size,
  count,
  color,
)

# bad
some_method(size, count, color, )

# good
some_method(size, count, color)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="spaces-around-equals">
            <a class="anchor" href="#spaces-around-equals"></a>Spaces around Equals</h3>
          <div class="paragraph">
            <p>Use spaces around the <code>=</code> operator when assigning default
              values to method parameters:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def some_method(arg1=:default, arg2=nil, arg3=[])
  # do something...
end

# good
def some_method(arg1 = :default, arg2 = nil, arg3 = [])
  # do something...
end</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>While several Ruby books suggest the first style, the second is much
              more prominent in practice (and arguably a bit more readable).</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-trailing-backslash">
            <a class="anchor" href="#no-trailing-backslash"></a>Line Continuation in Expressions</h3>
          <div class="paragraph">
            <p>Avoid line continuation with <code>\</code> where not required. In practice,
              avoid using line continuations for anything but string concatenation.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad (\ is not needed here)
result = 1 - \
         2

# bad (\ is required, but still ugly as hell)
result = 1 \
         - 2

# good
result = 1 -
         2

long_string = 'First part of the long string' \
              ' and second part of the long string'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="consistent-multi-line-chains">
            <a class="anchor" href="#consistent-multi-line-chains"></a>Multi-line Method Chains</h3>
          <div class="paragraph">
            <p>Adopt a consistent multi-line method chaining style. There are two popular
              styles in the Ruby community, both of which are considered good - leading
              <code>.</code> and trailing <code>.</code>.</p>
          </div>
          <div class="sect3">
            <h4 id="leading-dot-in-multi-line-chains">
              <a class="anchor" href="#leading-dot-in-multi-line-chains"></a>Leading <code>.</code></h4>
            <div class="paragraph">
              <p>When continuing a chained method invocation on another line, keep the
                <code>.</code> on the second line.</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - need to consult first line to understand second line
one.two.three.
  four

# good - it's immediately clear what's going on the second line
one.two.three
  .four</code></pre>
              </div>
            </div>
          </div>
          <div class="sect3">
            <h4 id="trailing-dot-in-multi-line-chains">
              <a class="anchor" href="#trailing-dot-in-multi-line-chains"></a>Trailing <code>.</code></h4>
            <div class="paragraph">
              <p>When continuing a chained method invocation on another line, include
                the <code>.</code> on the first line to indicate that the expression
                continues.</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - need to read ahead to the second line to know that the chain continues
one.two.three
  .four

# good - it's immediately clear that the expression continues beyond the first line
one.two.three.
  four</code></pre>
              </div>
            </div>
            <div class="paragraph">
              <p>A discussion on the merits of both alternative styles can be found
                <a href="https://github.com/rubocop-hq/ruby-style-guide/pull/176">here</a>.</p>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-double-indent">
            <a class="anchor" href="#no-double-indent"></a>Method Arguments Alignment</h3>
          <div class="paragraph">
            <p>Align the arguments of a method call if they span more than one line.
              When aligning arguments is not appropriate due to line-length constraints,
              single indent for the lines after the first is also acceptable.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># starting point (line is too long)
def send_mail(source)
  Mailer.deliver(to: 'bob@example.com', from: 'us@example.com', subject: 'Important message', body: source.text)
end

# bad (double indent)
def send_mail(source)
  Mailer.deliver(
      to: 'bob@example.com',
      from: 'us@example.com',
      subject: 'Important message',
      body: source.text)
end

# good
def send_mail(source)
  Mailer.deliver(to: 'bob@example.com',
                 from: 'us@example.com',
                 subject: 'Important message',
                 body: source.text)
end

# good (normal indent)
def send_mail(source)
  Mailer.deliver(
    to: 'bob@example.com',
    from: 'us@example.com',
    subject: 'Important message',
    body: source.text
  )
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-braces-opts-hash">
            <a class="anchor" href="#no-braces-opts-hash"></a>Implicit Options Hash</h3>
          <div class="admonitionblock important">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Important</div>
                </td>
                <td class="content">
                  As of Ruby 2.7 braces around an options hash are no longer optional.
                </td>
              </tr>
            </table>
          </div>
          <div class="paragraph">
            <p>Omit the outer braces around an implicit options hash.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
user.set({ name: 'John', age: 45, permissions: { read: true } })

# good
user.set(name: 'John', age: 45, permissions: { read: true })</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-dsl-decorating">
            <a class="anchor" href="#no-dsl-decorating"></a>DSL Method Calls</h3>
          <div class="paragraph">
            <p>Omit both the outer braces and parentheses for methods that are part
              of an internal DSL.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Person &lt; ActiveRecord::Base
  # bad
  validates(:name, { presence: true, length: { within: 1..10 } })

  # good
  validates :name, presence: true, length: { within: 1..10 }
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="parens-no-spaces">
            <a class="anchor" href="#parens-no-spaces"></a>Space in Method Calls</h3>
          <div class="paragraph">
            <p>Do not put a space between a method name and the opening parenthesis.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
puts (x + y)

# good
puts(x + y)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="space-in-brackets-access">
            <a class="anchor" href="#space-in-brackets-access"></a>Space in Brackets Access</h3>
          <div class="paragraph">
            <p>Do not put a space between a receiver name and the opening brackets.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
collection [index_or_key]

# good
collection[index_or_key]</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="align-multiline-arrays">
            <a class="anchor" href="#align-multiline-arrays"></a>Multi-line Arrays Alignment</h3>
          <div class="paragraph">
            <p>Align the elements of array literals spanning multiple lines.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - single indent
menu_item = %w[Spam Spam Spam Spam Spam Spam Spam Spam
  Baked beans Spam Spam Spam Spam Spam]

# good
menu_item = %w[
  Spam Spam Spam Spam Spam Spam Spam Spam
  Baked beans Spam Spam Spam Spam Spam
]

# good
menu_item =
  %w[Spam Spam Spam Spam Spam Spam Spam Spam
     Baked beans Spam Spam Spam Spam Spam]</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="naming-conventions">
        <a class="anchor" href="#naming-conventions"></a>Naming Conventions</h2>
      <div class="sectionbody">
        <div class="quoteblock">
          <blockquote>
            <div class="paragraph">
              <p>The only real difficulties in programming are cache invalidation and
                naming things.</p>
            </div>
          </blockquote>
          <div class="attribution">
            &#8212; Phil Karlton
          </div>
        </div>
        <div class="sect2">
          <h3 id="english-identifiers">
            <a class="anchor" href="#english-identifiers"></a>English for Identifiers</h3>
          <div class="paragraph">
            <p>Name identifiers in English.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - identifier using non-ascii characters
заплата = 1_000

# bad - identifier is a Bulgarian word, written with Latin letters (instead of Cyrillic)
zaplata = 1_000

# good
salary = 1_000</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="snake-case-symbols-methods-vars">
            <a class="anchor" href="#snake-case-symbols-methods-vars"></a>Snake Case for Symbols, Methods and Variables</h3>
          <div class="paragraph">
            <p>Use <code>snake_case</code> for symbols, methods and variables.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
:'some symbol'
:SomeSymbol
:someSymbol

someVar = 5

def someMethod
  # some code
end

def SomeMethod
  # some code
end

# good
:some_symbol

some_var = 5

def some_method
  # some code
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="snake-case-symbols-methods-vars-with-numbers">
            <a class="anchor" href="#snake-case-symbols-methods-vars-with-numbers"></a>Identifiers with a Numeric Suffix</h3>
          <div class="paragraph">
            <p>Do not separate numbers from letters on symbols, methods and variables.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
:some_sym_1

some_var_1 = 1

var_10 = 10

def some_method_1
  # some code
end

# good
:some_sym1

some_var1 = 1

var10 = 10

def some_method1
  # some code
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="camelcase-classes">
            <a class="anchor" href="#camelcase-classes"></a>CapitalCase for Classes and Modules</h3>
          <div class="admonitionblock note">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Note</div>
                </td>
                <td class="content">
                  <code>CapitalCase</code> is also known as <code>UpperCamelCase, `CapitalWords</code>                  and <code>PascalCase</code>.
                </td>
              </tr>
            </table>
          </div>
          <div class="paragraph">
            <p>Use <code>CapitalCase</code> for classes and modules. (Keep acronyms
              like HTTP, RFC, XML uppercase).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class Someclass
  # some code
end

class Some_Class
  # some code
end

class SomeXml
  # some code
end

class XmlSomething
  # some code
end

# good
class SomeClass
  # some code
end

class SomeXML
  # some code
end

class XMLSomething
  # some code
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="snake-case-files">
            <a class="anchor" href="#snake-case-files"></a>Snake Case for Files</h3>
          <div class="paragraph">
            <p>Use <code>snake_case</code> for naming files, e.g. <code>hello_world.rb</code>.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="snake-case-dirs">
            <a class="anchor" href="#snake-case-dirs"></a>Snake Case for Directories</h3>
          <div class="paragraph">
            <p>Use <code>snake_case</code> for naming directories, e.g. <code>lib/hello_world/hello_world.rb</code>.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="one-class-per-file">
            <a class="anchor" href="#one-class-per-file"></a>One Class per File</h3>
          <div class="paragraph">
            <p>Aim to have just a single class/module per source file. Name the file
              name as the class/module, but replacing <code>CapitalCase</code> with
              <code>snake_case</code>.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="screaming-snake-case">
            <a class="anchor" href="#screaming-snake-case"></a>Screaming Snake Case for Constants</h3>
          <div class="paragraph">
            <p>Use <code>SCREAMING_SNAKE_CASE</code> for other constants (those that
              don&#8217;t refer to classes and modules).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
SomeConst = 5

# good
SOME_CONST = 5</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="bool-methods-qmark">
            <a class="anchor" href="#bool-methods-qmark"></a>Predicate Methods Suffix</h3>
          <div class="paragraph">
            <p>The names of predicate methods (methods that return a boolean value)
              should end in a question mark (i.e. <code>Array#empty?</code>). Methods
              that don&#8217;t return a boolean, shouldn&#8217;t end in a question
              mark.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def even(value)
end

# good
def even?(value)
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="bool-methods-prefix">
            <a class="anchor" href="#bool-methods-prefix"></a>Predicate Methods Prefix</h3>
          <div class="paragraph">
            <p>Avoid prefixing predicate methods with the auxiliary verbs such as <code>is</code>,
              <code>does</code>, or <code>can</code>. These words are redundant and
              inconsistent with the style of boolean methods in the Ruby core library,
              such as <code>empty?</code> and <code>include?</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class Person
  def is_tall?
    true
  end

  def can_play_basketball?
    false
  end

  def does_like_candy?
    true
  end
end

# good
class Person
  def tall?
    true
  end

  def basketball_player?
    false
  end

  def likes_candy?
    true
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="dangerous-method-bang">
            <a class="anchor" href="#dangerous-method-bang"></a>Dangerous Method Suffix</h3>
          <div class="paragraph">
            <p>The names of potentially <em>dangerous</em> methods (i.e. methods that
              modify <code>self</code> or the arguments, <code>exit!</code> (doesn&#8217;t
              run the finalizers like <code>exit</code> does), etc) should end with
              an exclamation mark if there exists a safe version of that <em>dangerous</em>              method.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - there is no matching 'safe' method
class Person
  def update!
  end
end

# good
class Person
  def update
  end
end

# good
class Person
  def update!
  end

  def update
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="safe-because-unsafe">
            <a class="anchor" href="#safe-because-unsafe"></a>Relationship between Safe and Dangerous Methods</h3>
          <div class="paragraph">
            <p>Define the non-bang (safe) method in terms of the bang (dangerous) one
              if possible.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Array
  def flatten_once!
    res = []

    each do |e|
      [*e].each { |f| res &lt;&lt; f }
    end

    replace(res)
  end

  def flatten_once
    dup.flatten_once!
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="underscore-unused-vars">
            <a class="anchor" href="#underscore-unused-vars"></a>Unused Variables Prefix</h3>
          <div class="paragraph">
            <p>Prefix with <code>_</code> unused block parameters and local variables.
              It&#8217;s also acceptable to use just <code>_</code> (although it&#8217;s
              a bit less descriptive). This convention is recognized by the Ruby
              interpreter and tools like RuboCop and will suppress their unused variable
              warnings.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
result = hash.map { |k, v| v + 1 }

def something(x)
  unused_var, used_var = something_else(x)
  # some code
end

# good
result = hash.map { |_k, v| v + 1 }

def something(x)
  _unused_var, used_var = something_else(x)
  # some code
end

# good
result = hash.map { |_, v| v + 1 }

def something(x)
  _, used_var = something_else(x)
  # some code
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="other-arg">
            <a class="anchor" href="#other-arg"></a><code>other</code> Parameter</h3>
          <div class="paragraph">
            <p>When defining binary operators and operator-alike methods, name the parameter
              <code>other</code> for operators with "symmetrical" semantics of operands.
              Symmetrical semantics means both sides of the operator are typically
              of same or coercible types.</p>
          </div>
          <div class="paragraph">
            <p>Operators and operator-alike methods with symmetrical semantics (the
              parameter should be named <code>other</code>): <code>+</code>, <code>-</code>,
              <code>*</code>, <code>/</code>, <code>%</code>, <code>**</code>, <code>==</code>,
              <code>&gt;</code>, <code>&lt;</code>, <code>|</code>, <code>&amp;</code>,
              <code>^</code>, <code>eql?</code>, <code>equal?</code>.</p>
          </div>
          <div class="paragraph">
            <p>Operators with non-symmetrical semantics (the parameter should <strong>not</strong>              be named <code>other</code>): <code>&lt;&lt;</code>, <code>[]</code>              (collection/item relations between operands), <code>===</code> (pattern/matchable
              relations).</p>
          </div>
          <div class="paragraph">
            <p>Note that the rule should be followed <strong>only</strong> if both sides
              of the operator have the same semantics. Prominent exception in Ruby
              core is, for example, <code>Array#*(int)</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># good
def +(other)
  # body omitted
end

# bad
def &lt;&lt;(other)
  @internal &lt;&lt; other
end

# good
def &lt;&lt;(item)
  @internal &lt;&lt; item
end

# bad
# Returns some string multiplied `other` times
def *(other)
  # body omitted
end

# good
# Returns some string multiplied `num` times
def *(num)
  # body omitted
end</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="flow-of-control">
        <a class="anchor" href="#flow-of-control"></a>Flow of Control</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="no-for-loops">
            <a class="anchor" href="#no-for-loops"></a><code>for</code> Loops</h3>
          <div class="paragraph">
            <p>Do not use <code>for</code>, unless you know exactly why. Most of the
              time iterators should be used instead.
              <code>for</code> is implemented in terms of <code>each</code> (so you&#8217;re
              adding a level of indirection), but with a twist - <code>for</code>              doesn&#8217;t introduce a new scope (unlike <code>each</code>) and
              variables defined in its block will be visible outside it.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">arr = [1, 2, 3]

# bad
for elem in arr do
  puts elem
end

# note that elem is accessible outside of the for loop
elem # =&gt; 3

# good
arr.each { |elem| puts elem }

# elem is not accessible outside each's block
elem # =&gt; NameError: undefined local variable or method `elem'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-then">
            <a class="anchor" href="#no-then"></a><code>then</code> in Multi-line Expression</h3>
          <div class="paragraph">
            <p>Do not use <code>then</code> for multi-line <code>if</code>/<code>unless</code>/<code>when</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
if some_condition then
  # body omitted
end

# bad
case foo
when bar then
  # body omitted
end

# good
if some_condition
  # body omitted
end

# good
case foo
when bar
  # body omitted
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="same-line-condition">
            <a class="anchor" href="#same-line-condition"></a>Condition Placement</h3>
          <div class="paragraph">
            <p>Always put the condition on the same line as the <code>if</code>/<code>unless</code>              in a multi-line conditional.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
if
  some_condition
  do_something
  do_something_else
end

# good
if some_condition
  do_something
  do_something_else
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="ternary-operator">
            <a class="anchor" href="#ternary-operator"></a>Ternary Operator vs <code>if</code></h3>
          <div class="paragraph">
            <p>Prefer the ternary operator(<code>?:</code>) over <code>if/then/else/end</code>              constructs. It&#8217;s more common and obviously more concise.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
result = if some_condition then something else something_else end

# good
result = some_condition ? something : something_else</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-nested-ternary">
            <a class="anchor" href="#no-nested-ternary"></a>Nested Ternary Operators</h3>
          <div class="paragraph">
            <p>Use one expression per branch in a ternary operator. This also means
              that ternary operators must not be nested. Prefer <code>if/else</code>              constructs in these cases.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
some_condition ? (nested_condition ? nested_something : nested_something_else) : something_else

# good
if some_condition
  nested_condition ? nested_something : nested_something_else
else
  something_else
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-semicolon-ifs">
            <a class="anchor" href="#no-semicolon-ifs"></a>Semicolon in <code>if</code></h3>
          <div class="paragraph">
            <p>Do not use <code>if x; &#8230;&#8203;</code>. Use the ternary operator
              instead.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
result = if some_condition; something else something_else end

# good
result = some_condition ? something : something_else</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="case-vs-if-else">
            <a class="anchor" href="#case-vs-if-else"></a><code>case</code> vs <code>if-else</code></h3>
          <div class="paragraph">
            <p>Prefer <code>case</code> over <code>if-elsif</code> when compared value
              is same in each clause.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
if status == :active
  perform_action
elsif status == :inactive || status == :hibernating
  check_timeout
else
  final_action
end

# good
case status
when :active
  perform_action
when :inactive, :hibernating
  check_timeout
else
  final_action
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="use-if-case-returns">
            <a class="anchor" href="#use-if-case-returns"></a>Returning Result from <code>if</code>/<code>case</code></h3>
          <div class="paragraph">
            <p>Leverage the fact that <code>if</code> and <code>case</code> are expressions
              which return a result.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
if condition
  result = x
else
  result = y
end

# good
result =
  if condition
    x
  else
    y
  end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="one-line-cases">
            <a class="anchor" href="#one-line-cases"></a>One-line Cases</h3>
          <div class="paragraph">
            <p>Use <code>when x then &#8230;&#8203;</code> for one-line cases.</p>
          </div>
          <div class="admonitionblock note">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Note</div>
                </td>
                <td class="content">
                  The alternative syntax <code>when x: &#8230;&#8203;</code> has
                  been removed as of Ruby 1.9.
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-when-semicolons">
            <a class="anchor" href="#no-when-semicolons"></a>Semicolon in <code>when</code></h3>
          <div class="paragraph">
            <p>Do not use <code>when x; &#8230;&#8203;</code>. See the previous rule.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="bang-not-not">
            <a class="anchor" href="#bang-not-not"></a><code>!</code> vs <code>not</code></h3>
          <div class="paragraph">
            <p>Use <code>!</code> instead of <code>not</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - parentheses are required because of op precedence
x = (not something)

# good
x = !something</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-bang-bang">
            <a class="anchor" href="#no-bang-bang"></a>Double Negation</h3>
          <div class="paragraph">
            <p>Avoid unnecessary uses of <code>!!</code></p>
          </div>
          <div class="paragraph">
            <p><code>!!</code> converts a value to boolean, but you don&#8217;t need
              this explicit conversion in the condition of a control expression;
              using it only obscures your intention.</p>
          </div>
          <div class="paragraph">
            <p>Consider using it only when there is a valid reason to restrict the result
              <code>true</code> or <code>false</code>. Examples include outputting
              to a particular format or API like JSON, or as the return value of
              a <code>predicate?</code> method. In these cases, also consider doing
              a nil check instead: <code>!something.nil?</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
x = 'test'
# obscure nil check
if !!x
  # body omitted
end

# good
x = 'test'
if x
  # body omitted
end

# good
def named?
  !name.nil?
end

# good
def banned?
  !!banned_until&amp;.future?
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-and-or-or">
            <a class="anchor" href="#no-and-or-or"></a><code>and</code>/<code>or</code></h3>
          <div class="paragraph">
            <p>The <code>and</code> and <code>or</code> keywords are banned. The minimal
              added readability is just not worth the high probability of introducing
              subtle bugs. For boolean expressions, always use <code>&amp;&amp;</code>              and <code>||</code> instead. For flow control, use <code>if</code>              and <code>unless</code>; <code>&amp;&amp;</code> and <code>||</code>              are also acceptable but less clear.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
# boolean expression
ok = got_needed_arguments and arguments_are_valid

# control flow
document.save or raise("Failed to save document!")

# good
# boolean expression
ok = got_needed_arguments &amp;&amp; arguments_are_valid

# control flow
raise("Failed to save document!") unless document.save

# ok
# control flow
document.save || raise("Failed to save document!")</code></pre>
            </div>
          </div>
          <div class="sidebarblock">
            <div class="content">
              <div class="title">Why Ban <code>and</code> and <code>or</code>?</div>
              <div class="paragraph">
                <p>The main reason is very simple - they add a lot of cognitive overhead,
                  as they don&#8217;t behave like similarly named operators in other
                  languages.</p>
              </div>
              <div class="paragraph">
                <p>First of all, <code>and</code> and <code>or</code> operators have
                  lower precedence than the <code>=</code> operator, whereas the
                  <code>&amp;&amp;</code> and <code>||</code> operators have higher
                  precedence than the <code>=</code> operator, based on order of
                  operations.</p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre class="highlight"><code class="language-ruby" data-lang="ruby">foo = true and false # results in foo being equal to true. Equivalent to ( foo = true ) and false
bar = false or true  # results in bar being equal to false. Equivalent to ( bar = false ) or true</code></pre>
                </div>
              </div>
              <div class="paragraph">
                <p>Also <code>&amp;&amp;</code> has higher precedence than <code>||</code>,
                  where as <code>and</code> and <code>or</code> have the same one.
                  Funny enough, even though <code>and</code> and <code>or</code>                  were inspired by Perl, they don&#8217;t have different precedence
                  in Perl.</p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre class="highlight"><code class="language-ruby" data-lang="ruby">foo = true or true and false # =&gt; false (it's effectively (true or true) and false)
foz = true || true &amp;&amp; false # =&gt; true (it's effectively true || (true &amp;&amp; false)
bar = false or true and false # =&gt; false (it's effectively (false or true) and false)
baz = false || true &amp;&amp; false # =&gt; false (it's effectively false || (true &amp;&amp; false))</code></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-multiline-ternary">
            <a class="anchor" href="#no-multiline-ternary"></a>Multi-line Ternary Operator</h3>
          <div class="paragraph">
            <p>Avoid multi-line <code>?:</code> (the ternary operator); use <code>if</code>/<code>unless</code>              instead.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="if-as-a-modifier">
            <a class="anchor" href="#if-as-a-modifier"></a><code>if</code> as a Modifier</h3>
          <div class="paragraph">
            <p>Prefer modifier <code>if</code>/<code>unless</code> usage when you have
              a single-line body. Another good alternative is the usage of control
              flow <code>&amp;&amp;</code>/<code>||</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
if some_condition
  do_something
end

# good
do_something if some_condition

# another good option
some_condition &amp;&amp; do_something</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-multiline-if-modifiers">
            <a class="anchor" href="#no-multiline-if-modifiers"></a>Multi-line <code>if</code> Modifiers</h3>
          <div class="paragraph">
            <p>Avoid modifier <code>if</code>/<code>unless</code> usage at the end of
              a non-trivial multi-line block.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
10.times do
  # multi-line body omitted
end if some_condition

# good
if some_condition
  10.times do
    # multi-line body omitted
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-nested-modifiers">
            <a class="anchor" href="#no-nested-modifiers"></a>Nested Modifiers</h3>
          <div class="paragraph">
            <p>Avoid nested modifier <code>if</code>/<code>unless</code>/<code>while</code>/<code>until</code>              usage. Prefer <code>&amp;&amp;</code>/<code>||</code> if appropriate.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
do_something if other_condition if some_condition

# good
do_something if some_condition &amp;&amp; other_condition</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="unless-for-negatives">
            <a class="anchor" href="#unless-for-negatives"></a><code>if</code> vs <code>unless</code></h3>
          <div class="paragraph">
            <p>Prefer <code>unless</code> over <code>if</code> for negative conditions
              (or control flow <code>||</code>).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
do_something if !some_condition

# bad
do_something if not some_condition

# good
do_something unless some_condition

# another good option
some_condition || do_something</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-else-with-unless">
            <a class="anchor" href="#no-else-with-unless"></a>Using <code>else</code> with <code>unless</code></h3>
          <div class="paragraph">
            <p>Do not use <code>unless</code> with <code>else</code>. Rewrite these
              with the positive case first.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
unless success?
  puts 'failure'
else
  puts 'success'
end

# good
if success?
  puts 'success'
else
  puts 'failure'
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-parens-around-condition">
            <a class="anchor" href="#no-parens-around-condition"></a>Parentheses around Condition</h3>
          <div class="paragraph">
            <p>Don&#8217;t use parentheses around the condition of a control expression.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
if (x &gt; 10)
  # body omitted
end

# good
if x &gt; 10
  # body omitted
end</code></pre>
            </div>
          </div>
          <div class="admonitionblock note">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Note</div>
                </td>
                <td class="content">
                  There is an exception to this rule, namely <a href="#safe-assignment-in-condition">safe assignment in condition</a>.
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-multiline-while-do">
            <a class="anchor" href="#no-multiline-while-do"></a>Multi-line <code>while do</code></h3>
          <div class="paragraph">
            <p>Do not use <code>while/until condition do</code> for multi-line <code>while/until</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
while x &gt; 5 do
  # body omitted
end

until x &gt; 5 do
  # body omitted
end

# good
while x &gt; 5
  # body omitted
end

until x &gt; 5
  # body omitted
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="while-as-a-modifier">
            <a class="anchor" href="#while-as-a-modifier"></a><code>while</code> as a Modifier</h3>
          <div class="paragraph">
            <p>Prefer modifier <code>while/until</code> usage when you have a single-line
              body.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
while some_condition
  do_something
end

# good
do_something while some_condition</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="until-for-negatives">
            <a class="anchor" href="#until-for-negatives"></a><code>while</code> vs <code>until</code></h3>
          <div class="paragraph">
            <p>Prefer <code>until</code> over <code>while</code> for negative conditions.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
do_something while !some_condition

# good
do_something until some_condition</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="infinite-loop">
            <a class="anchor" href="#infinite-loop"></a>Infinite Loop</h3>
          <div class="paragraph">
            <p>Use <code>Kernel#loop</code> instead of <code>while</code>/<code>until</code>              when you need an infinite loop.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
while true
  do_something
end

until false
  do_something
end

# good
loop do
  do_something
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="loop-with-break">
            <a class="anchor" href="#loop-with-break"></a><code>loop</code> with <code>break</code></h3>
          <div class="paragraph">
            <p>Use <code>Kernel#loop</code> with <code>break</code> rather than <code>begin/end/until</code>              or <code>begin/end/while</code> for post-loop tests.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
begin
  puts val
  val += 1
end while val &lt; 0

# good
loop do
  puts val
  val += 1
  break unless val &lt; 0
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-explicit-return">
            <a class="anchor" href="#no-explicit-return"></a>Explicit <code>return</code></h3>
          <div class="paragraph">
            <p>Avoid <code>return</code> where not required for flow of control.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def some_method(some_arr)
  return some_arr.size
end

# good
def some_method(some_arr)
  some_arr.size
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-self-unless-required">
            <a class="anchor" href="#no-self-unless-required"></a>Explicit <code>self</code></h3>
          <div class="paragraph">
            <p>Avoid <code>self</code> where not required. (It is only required when
              calling a <code>self</code> write accessor, methods named after reserved
              words, or overloadable operators.)</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def ready?
  if self.last_reviewed_at &gt; self.last_updated_at
    self.worker.update(self.content, self.options)
    self.status = :in_progress
  end
  self.status == :verified
end

# good
def ready?
  if last_reviewed_at &gt; last_updated_at
    worker.update(content, options)
    self.status = :in_progress
  end
  status == :verified
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-shadowing">
            <a class="anchor" href="#no-shadowing"></a>Shadowing Methods</h3>
          <div class="paragraph">
            <p>As a corollary, avoid shadowing methods with local variables unless they
              are both equivalent.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Foo
  attr_accessor :options

  # ok
  def initialize(options)
    self.options = options
    # both options and self.options are equivalent here
  end

  # bad
  def do_something(options = {})
    unless options[:when] == :later
      output(self.options[:message])
    end
  end

  # good
  def do_something(params = {})
    unless params[:when] == :later
      output(options[:message])
    end
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="safe-assignment-in-condition">
            <a class="anchor" href="#safe-assignment-in-condition"></a>Safe Assignment in Condition</h3>
          <div class="paragraph">
            <p>Don&#8217;t use the return value of <code>=</code> (an assignment) in
              conditional expressions unless the assignment is wrapped in parentheses.
              This is a fairly popular idiom among Rubyists that&#8217;s sometimes
              referred to as <em>safe assignment in condition</em>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad (+ a warning)
if v = array.grep(/foo/)
  do_something(v)
  # some code
end

# good (MRI would still complain, but RuboCop won't)
if (v = array.grep(/foo/))
  do_something(v)
  # some code
end

# good
v = array.grep(/foo/)
if v
  do_something(v)
  # some code
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-BEGIN-blocks">
            <a class="anchor" href="#no-BEGIN-blocks"></a><code>BEGIN</code> Blocks</h3>
          <div class="paragraph">
            <p>Avoid the use of <code>BEGIN</code> blocks.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-END-blocks">
            <a class="anchor" href="#no-END-blocks"></a><code>END</code> Blocks</h3>
          <div class="paragraph">
            <p>Do not use <code>END</code> blocks. Use <code>Kernel#at_exit</code> instead.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
END { puts 'Goodbye!' }

# good
at_exit { puts 'Goodbye!' }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-nested-conditionals">
            <a class="anchor" href="#no-nested-conditionals"></a>Nested Conditionals</h3>
          <div class="paragraph">
            <p>Avoid use of nested conditionals for flow of control.</p>
          </div>
          <div class="paragraph">
            <p>Prefer a guard clause when you can assert invalid data. A guard clause
              is a conditional statement at the top of a function that bails out
              as soon as it can.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def compute_thing(thing)
  if thing[:foo]
    update_with_bar(thing[:foo])
    if thing[:foo][:bar]
      partial_compute(thing)
    else
      re_compute(thing)
    end
  end
end

# good
def compute_thing(thing)
  return unless thing[:foo]
  update_with_bar(thing[:foo])
  return re_compute(thing) unless thing[:foo][:bar]
  partial_compute(thing)
end</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>Prefer <code>next</code> in loops instead of conditional blocks.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
[0, 1, 2, 3].each do |item|
  if item &gt; 1
    puts item
  end
end

# good
[0, 1, 2, 3].each do |item|
  next unless item &gt; 1
  puts item
end</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="exceptions">
        <a class="anchor" href="#exceptions"></a>Exceptions</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="prefer-raise-over-fail">
            <a class="anchor" href="#prefer-raise-over-fail"></a><code>raise</code> vs <code>fail</code></h3>
          <div class="paragraph">
            <p>Prefer <code>raise</code> over <code>fail</code> for exceptions.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
fail SomeException, 'message'

# good
raise SomeException, 'message'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-explicit-runtimeerror">
            <a class="anchor" href="#no-explicit-runtimeerror"></a>Raising Explicit <code>RuntimeError</code></h3>
          <div class="paragraph">
            <p>Don&#8217;t specify <code>RuntimeError</code> explicitly in the two argument
              version of <code>raise</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
raise RuntimeError, 'message'

# good - signals a RuntimeError by default
raise 'message'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="exception-class-messages">
            <a class="anchor" href="#exception-class-messages"></a>Exception Class Messages</h3>
          <div class="paragraph">
            <p>Prefer supplying an exception class and a message as two separate arguments
              to <code>raise</code>, instead of an exception instance.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
raise SomeException.new('message')
# Note that there is no way to do `raise SomeException.new('message'), backtrace`.

# good
raise SomeException, 'message'
# Consistent with `raise SomeException, 'message', backtrace`.</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-return-ensure">
            <a class="anchor" href="#no-return-ensure"></a><code>return</code> from <code>ensure</code></h3>
          <div class="paragraph">
            <p>Do not return from an <code>ensure</code> block. If you explicitly return
              from a method inside an <code>ensure</code> block, the return will
              take precedence over any exception being raised, and the method will
              return as if no exception had been raised at all. In effect, the exception
              will be silently thrown away.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def foo
  raise
ensure
  return 'very bad idea'
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="begin-implicit">
            <a class="anchor" href="#begin-implicit"></a>Implicit <code>begin</code></h3>
          <div class="paragraph">
            <p>Use <em>implicit begin blocks</em> where possible.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def foo
  begin
    # main logic goes here
  rescue
    # failure handling goes here
  end
end

# good
def foo
  # main logic goes here
rescue
  # failure handling goes here
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="contingency-methods">
            <a class="anchor" href="#contingency-methods"></a>Contingency Methods</h3>
          <div class="paragraph">
            <p>Mitigate the proliferation of <code>begin</code> blocks by using <em>contingency methods</em>              (a term coined by Avdi Grimm).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
begin
  something_that_might_fail
rescue IOError
  # handle IOError
end

begin
  something_else_that_might_fail
rescue IOError
  # handle IOError
end

# good
def with_io_error_handling
  yield
rescue IOError
  # handle IOError
end

with_io_error_handling { something_that_might_fail }

with_io_error_handling { something_else_that_might_fail }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="dont-hide-exceptions">
            <a class="anchor" href="#dont-hide-exceptions"></a>Suppressing Exceptions</h3>
          <div class="paragraph">
            <p>Don&#8217;t suppress exceptions.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
begin
  do_something # an exception occurs here
rescue SomeError
end

# good
begin
  do_something # an exception occurs here
rescue SomeError
  handle_exception
end

# good
begin
  do_something # an exception occurs here
rescue SomeError
  # Notes on why exception handling is not performed
end

# good
do_something rescue nil</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-rescue-modifiers">
            <a class="anchor" href="#no-rescue-modifiers"></a>Using <code>rescue</code> as a Modifier</h3>
          <div class="paragraph">
            <p>Avoid using <code>rescue</code> in its modifier form.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - this catches exceptions of StandardError class and its descendant classes
read_file rescue handle_error($!)

# good - this catches only the exceptions of Errno::ENOENT class and its descendant classes
def foo
  read_file
rescue Errno::ENOENT =&gt; e
  handle_error(e)
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-exceptional-flows">
            <a class="anchor" href="#no-exceptional-flows"></a>Using Exceptions for Flow of Control</h3>
          <div class="paragraph">
            <p>Don&#8217;t use exceptions for flow of control.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
begin
  n / d
rescue ZeroDivisionError
  puts 'Cannot divide by 0!'
end

# good
if d.zero?
  puts 'Cannot divide by 0!'
else
  n / d
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-blind-rescues">
            <a class="anchor" href="#no-blind-rescues"></a>Blind Rescues</h3>
          <div class="paragraph">
            <p>Avoid rescuing the <code>Exception</code> class. This will trap signals
              and calls to <code>exit</code>, requiring you to <code>kill -9</code>              the process.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
begin
  # calls to exit and kill signals will be caught (except kill -9)
  exit
rescue Exception
  puts "you didn't really want to exit, right?"
  # exception handling
end

# good
begin
  # a blind rescue rescues from StandardError, not Exception as many
  # programmers assume.
rescue =&gt; e
  # exception handling
end

# also good
begin
  # an exception occurs here
rescue StandardError =&gt; e
  # exception handling
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="exception-ordering">
            <a class="anchor" href="#exception-ordering"></a>Exception Rescuing Ordering</h3>
          <div class="paragraph">
            <p>Put more specific exceptions higher up the rescue chain, otherwise they&#8217;ll
              never be rescued from.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
begin
  # some code
rescue StandardError =&gt; e
  # some handling
rescue IOError =&gt; e
  # some handling that will never be executed
end

# good
begin
  # some code
rescue IOError =&gt; e
  # some handling
rescue StandardError =&gt; e
  # some handling
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="release-resources">
            <a class="anchor" href="#release-resources"></a>Release External Resources</h3>
          <div class="paragraph">
            <p>Release external resources obtained by your program in an <code>ensure</code>              block.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">f = File.open('testfile')
begin
  # .. process
rescue
  # .. handle error
ensure
  f.close if f
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="auto-release-resources">
            <a class="anchor" href="#auto-release-resources"></a>Auto-release External Resources</h3>
          <div class="paragraph">
            <p>Use versions of resource obtaining methods that do automatic resource
              cleanup when possible.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - you need to close the file descriptor explicitly
f = File.open('testfile')
# some action on the file
f.close

# good - the file descriptor is closed automatically
File.open('testfile') do |f|
  # some action on the file
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="standard-exceptions">
            <a class="anchor" href="#standard-exceptions"></a>Standard Exceptions</h3>
          <div class="paragraph">
            <p>Prefer the use of exceptions from the standard library over introducing
              new exception classes.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="assignment-comparison">
        <a class="anchor" href="#assignment-comparison"></a>Assignment &amp; Comparison</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="parallel-assignment">
            <a class="anchor" href="#parallel-assignment"></a>Parallel Assignment</h3>
          <div class="paragraph">
            <p>Avoid the use of parallel assignment for defining variables. Parallel
              assignment is allowed when it is the return of a method call, used
              with the splat operator, or when used to swap variable assignment.
              Parallel assignment is less readable than separate assignment.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
a, b, c, d = 'foo', 'bar', 'baz', 'foobar'

# good
a = 'foo'
b = 'bar'
c = 'baz'
d = 'foobar'

# good - swapping variable assignment
# Swapping variable assignment is a special case because it will allow you to
# swap the values that are assigned to each variable.
a = 'foo'
b = 'bar'

a, b = b, a
puts a # =&gt; 'bar'
puts b # =&gt; 'foo'

# good - method return
def multi_return
  [1, 2]
end

first, second = multi_return

# good - use with splat
first, *list = [1, 2, 3, 4] # first =&gt; 1, list =&gt; [2, 3, 4]

hello_array = *'Hello' # =&gt; ["Hello"]

a = *(1..3) # =&gt; [1, 2, 3]</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="values-swapping">
            <a class="anchor" href="#values-swapping"></a>Values Swapping</h3>
          <div class="paragraph">
            <p>Use parallel assignment when swapping 2 values.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
tmp = x
x = y
y = tmp

# good
x, y = y, x</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="trailing-underscore-variables">
            <a class="anchor" href="#trailing-underscore-variables"></a>Dealing with Trailing Underscore Variables in Destructuring Assignment</h3>
          <div class="paragraph">
            <p>Avoid the use of unnecessary trailing underscore variables during parallel
              assignment. Named underscore variables are to be preferred over underscore
              variables because of the context that they provide. Trailing underscore
              variables are necessary when there is a splat variable defined on the
              left side of the assignment, and the splat variable is not an underscore.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
foo = 'one,two,three,four,five'
# Unnecessary assignment that does not provide useful information
first, second, _ = foo.split(',')
first, _, _ = foo.split(',')
first, *_ = foo.split(',')

# good
foo = 'one,two,three,four,five'
# The underscores are needed to show that you want all elements
# except for the last number of underscore elements
*beginning, _ = foo.split(',')
*beginning, something, _ = foo.split(',')

a, = foo.split(',')
a, b, = foo.split(',')
# Unnecessary assignment to an unused variable, but the assignment
# provides us with useful information.
first, _second = foo.split(',')
first, _second, = foo.split(',')
first, *_ending = foo.split(',')</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="self-assignment">
            <a class="anchor" href="#self-assignment"></a>Self-assignment</h3>
          <div class="paragraph">
            <p>Use shorthand self assignment operators whenever applicable.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
x = x + y
x = x * y
x = x**y
x = x / y
x = x || y
x = x &amp;&amp; y

# good
x += y
x *= y
x **= y
x /= y
x ||= y
x &amp;&amp;= y</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="double-pipe-for-uninit">
            <a class="anchor" href="#double-pipe-for-uninit"></a>Conditional Variable Initialization Shorthand</h3>
          <div class="paragraph">
            <p>Use <code>||=</code> to initialize variables only if they&#8217;re not
              already initialized.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
name = name ? name : 'Bozhidar'

# bad
name = 'Bozhidar' unless name

# good - set name to 'Bozhidar', only if it's nil or false
name ||= 'Bozhidar'</code></pre>
            </div>
          </div>
          <div class="admonitionblock warning">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Warning</div>
                </td>
                <td class="content">
                  <div class="paragraph">
                    <p>Don&#8217;t use <code>||=</code> to initialize boolean variables.
                      (Consider what would happen if the current value happened to
                      be <code>false</code>.)</p>
                  </div>
                  <div class="listingblock">
                    <div class="content">
                      <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - would set enabled to true even if it was false
enabled ||= true

# good
enabled = true if enabled.nil?</code></pre>
                    </div>
                  </div>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="sect2">
          <h3 id="double-amper-preprocess">
            <a class="anchor" href="#double-amper-preprocess"></a>Existence Check Shorthand</h3>
          <div class="paragraph">
            <p>Use <code>&amp;&amp;=</code> to preprocess variables that may or may
              not exist. Using <code>&amp;&amp;=</code> will change the value only
              if it exists, removing the need to check its existence with <code>if</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
if something
  something = something.downcase
end

# bad
something = something ? something.downcase : nil

# ok
something = something.downcase if something

# good
something = something &amp;&amp; something.downcase

# better
something &amp;&amp;= something.downcase</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="identity-comparison">
            <a class="anchor" href="#identity-comparison"></a>Identity Comparison</h3>
          <div class="paragraph">
            <p>Prefer <code>equal?</code> over <code>==</code> when comparing <code>object_id</code>.
              <code>Object#equal?</code> is provided to compare objects for identity,
              and in contrast <code>Object#==</code> is provided for the purpose
              of doing value comparison.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
foo.object_id == bar.object_id

# good
foo.equal?(bar)</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>Similarly, prefer using <code>Hash#compare_by_identity</code> than using
              <code>object_id</code> for keys:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
hash = {}
hash[foo.object_id] = :bar
if hash.key?(baz.object_id) # ...

# good
hash = {}.compare_by_identity
hash[foo] = :bar
if hash.key?(baz) # ...</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>Note that <code>Set</code> also has <code>Set#compare_by_identity</code>              available.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-case-equality">
            <a class="anchor" href="#no-case-equality"></a>Explicit Use of the Case Equality Operator</h3>
          <div class="paragraph">
            <p>Avoid explicit use of the case equality operator <code>===</code>. As
              its name implies it is meant to be used implicitly by <code>case</code>              expressions and outside of them it yields some pretty confusing code.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
Array === something
(1..100) === 7
/something/ === some_string

# good
something.is_a?(Array)
(1..100).include?(7)
some_string.match?(/something/)</code></pre>
            </div>
          </div>
          <div class="admonitionblock note">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Note</div>
                </td>
                <td class="content">
                  With direct subclasses of <code>BasicObject</code>, using <code>is_a?</code>                  is not an option since <code>BasicObject</code> doesn&#8217;t provide
                  that method (it&#8217;s defined in <code>Object</code>). In those
                  rare cases it&#8217;s OK to use <code>===</code>.
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="sect2">
          <h3 id="is-a-vs-kind-of">
            <a class="anchor" href="#is-a-vs-kind-of"></a><code>is_a?</code> vs <code>kind_of?</code></h3>
          <div class="paragraph">
            <p>Prefer <code>is_a?</code> over <code>kind_of?</code>. The two methods
              are synonyms, but <code>is_a?</code> is the more commonly used name
              in the wild.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
something.kind_of?(Array)

# good
something.is_a?(Array)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="is-a-vs-instance-of">
            <a class="anchor" href="#is-a-vs-instance-of"></a><code>is_a?</code> vs <code>instance_of?</code></h3>
          <div class="paragraph">
            <p>Prefer <code>is_a?</code> over <code>instance_of?</code>.</p>
          </div>
          <div class="paragraph">
            <p>While the two methods are similar, <code>is_a?</code> will consider the
              whole inheritance chain (superclasses and included modules), which
              is what you normally would want to do. <code>instance_of?</code>, on
              the other hand, only returns <code>true</code> if an object is an instance
              of that exact class you&#8217;re checking for, not a subclass.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
something.instance_of?(Array)

# good
something.is_a?(Array)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="instance-of-vs-class-comparison">
            <a class="anchor" href="#instance-of-vs-class-comparison"></a><code>instance_of?</code> vs class comparison</h3>
          <div class="paragraph">
            <p>Use <code>Object#instance_of?</code> instead of class comparison for
              equality.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
var.class == Date
var.class.equal?(Date)
var.class.eql?(Date)
var.class.name == 'Date'

# good
var.instance_of?(Date)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="eql">
            <a class="anchor" href="#eql"></a><code>==</code> vs <code>eql?</code></h3>
          <div class="paragraph">
            <p>Do not use <code>eql?</code> when using <code>==</code> will do. The
              stricter comparison semantics provided by <code>eql?</code> are rarely
              needed in practice.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - eql? is the same as == for strings
'ruby'.eql? some_str

# good
'ruby' == some_str
1.0.eql? x # eql? makes sense here if want to differentiate between Integer and Float 1</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="blocks-procs-lambdas">
        <a class="anchor" href="#blocks-procs-lambdas"></a>Blocks, Procs &amp; Lambdas</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="single-action-blocks">
            <a class="anchor" href="#single-action-blocks"></a>Proc Application Shorthand</h3>
          <div class="paragraph">
            <p>Use the Proc invocation shorthand when the invoked method is the only
              operation of a block.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
names.map { |name| name.upcase }

# good
names.map(&amp;:upcase)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="single-line-blocks">
            <a class="anchor" href="#single-line-blocks"></a>Single-line Blocks Delimiters</h3>
          <div class="paragraph">
            <p>Prefer <code>{&#8230;&#8203;}</code> over <code>do&#8230;&#8203;end</code>              for single-line blocks. Avoid using <code>{&#8230;&#8203;}</code> for
              multi-line blocks (multi-line chaining is always ugly). Always use
              <code>do&#8230;&#8203;end</code> for "control flow" and "method definitions"
              (e.g. in Rakefiles and certain DSLs). Avoid <code>do&#8230;&#8203;end</code>              when chaining.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">names = %w[Bozhidar Filipp Sarah]

# bad
names.each do |name|
  puts name
end

# good
names.each { |name| puts name }

# bad
names.select do |name|
  name.start_with?('S')
end.map { |name| name.upcase }

# good
names.select { |name| name.start_with?('S') }.map(&amp;:upcase)</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>Some will argue that multi-line chaining would look OK with the use of
              {&#8230;&#8203;}, but they should ask themselves - is this code really
              readable and can the blocks' contents be extracted into nifty methods?</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="block-argument">
            <a class="anchor" href="#block-argument"></a>Explicit Block Argument</h3>
          <div class="paragraph">
            <p>Consider using explicit block argument to avoid writing block literal
              that just passes its arguments to another block.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">require 'tempfile'

# bad
def with_tmp_dir
  Dir.mktmpdir do |tmp_dir|
    Dir.chdir(tmp_dir) { |dir| yield dir }  # block just passes arguments
  end
end

# good
def with_tmp_dir(&amp;block)
  Dir.mktmpdir do |tmp_dir|
    Dir.chdir(tmp_dir, &amp;block)
  end
end

with_tmp_dir do |dir|
  puts "dir is accessible as a parameter and pwd is set: #{dir}"
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-trailing-parameters-comma">
            <a class="anchor" href="#no-trailing-parameters-comma"></a>Trailing Comma in Block Parameters</h3>
          <div class="paragraph">
            <p>Avoid comma after the last parameter in a block, except in cases where
              only a single argument is present and its removal would affect functionality
              (for instance, array destructuring).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - easier to move/add/remove parameters, but still not preferred
[[1, 2, 3], [4, 5, 6]].each do |a, b, c,|
  a + b + c
end

# good
[[1, 2, 3], [4, 5, 6]].each do |a, b, c|
  a + b + c
end

# bad
[[1, 2, 3], [4, 5, 6]].each { |a, b, c,| a + b + c }

# good
[[1, 2, 3], [4, 5, 6]].each { |a, b, c| a + b + c }

# good - this comma is meaningful for array destructuring
[[1, 2, 3], [4, 5, 6]].map { |a,| a }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-nested-methods">
            <a class="anchor" href="#no-nested-methods"></a>Nested Method Definitions</h3>
          <div class="paragraph">
            <p>Do not use nested method definitions, use lambda instead. Nested method
              definitions actually produce methods in the same scope (e.g. class)
              as the outer method. Furthermore, the "nested method" will be redefined
              every time the method containing its definition is invoked.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def foo(x)
  def bar(y)
    # body omitted
  end

  bar(x)
end

# good - the same as the previous, but no bar redefinition on every foo call
def bar(y)
  # body omitted
end

def foo(x)
  bar(x)
end

# also good
def foo(x)
  bar = -&gt;(y) { ... }
  bar.call(x)
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="lambda-multi-line">
            <a class="anchor" href="#lambda-multi-line"></a>Multi-line Lambda Definition</h3>
          <div class="paragraph">
            <p>Use the new lambda literal syntax for single-line body blocks. Use the
              <code>lambda</code> method for multi-line blocks.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
l = lambda { |a, b| a + b }
l.call(1, 2)

# correct, but looks extremely awkward
l = -&gt;(a, b) do
  tmp = a * 7
  tmp * b / 50
end

# good
l = -&gt;(a, b) { a + b }
l.call(1, 2)

l = lambda do |a, b|
  tmp = a * 7
  tmp * b / 50
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="stabby-lambda-with-args">
            <a class="anchor" href="#stabby-lambda-with-args"></a>Stabby Lambda Definition with Parameters</h3>
          <div class="paragraph">
            <p>Don&#8217;t omit the parameter parentheses when defining a stabby lambda
              with parameters.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
l = -&gt;x, y { something(x, y) }

# good
l = -&gt;(x, y) { something(x, y) }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="stabby-lambda-no-args">
            <a class="anchor" href="#stabby-lambda-no-args"></a>Stabby Lambda Definition without Parameters</h3>
          <div class="paragraph">
            <p>Omit the parameter parentheses when defining a stabby lambda with no
              parameters.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
l = -&gt;() { something }

# good
l = -&gt; { something }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="proc">
            <a class="anchor" href="#proc"></a><code>proc</code> vs <code>Proc.new</code></h3>
          <div class="paragraph">
            <p>Prefer <code>proc</code> over <code>Proc.new</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
p = Proc.new { |n| puts n }

# good
p = proc { |n| puts n }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="proc-call">
            <a class="anchor" href="#proc-call"></a>Proc Invocation</h3>
          <div class="paragraph">
            <p>Prefer <code>proc.call()</code> over <code>proc[]</code> or <code>proc.()</code>              for both lambdas and procs.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - looks similar to Enumeration access
l = -&gt;(v) { puts v }
l[1]

# good - most compact form, but might be confusing for newcomers to Ruby
l = -&gt;(v) { puts v }
l.(1)

# good - a bit verbose, but crystal clear
l = -&gt;(v) { puts v }
l.call(1)</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="methods">
        <a class="anchor" href="#methods"></a>Methods</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="short-methods">
            <a class="anchor" href="#short-methods"></a>Short Methods</h3>
          <div class="paragraph">
            <p>Avoid methods longer than 10 LOC (lines of code). Ideally, most methods
              will be shorter than 5 LOC. Empty lines do not contribute to the relevant
              LOC.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-single-line-methods">
            <a class="anchor" href="#no-single-line-methods"></a>No Single-line Methods</h3>
          <div class="paragraph">
            <p>Avoid single-line methods. Although they are somewhat popular in the
              wild, there are a few peculiarities about their definition syntax that
              make their use undesirable. At any rate - there should be no more than
              one expression in a single-line method.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def too_much; something; something_else; end

# okish - notice that the first ; is required
def no_braces_method; body end

# okish - notice that the second ; is optional
def no_braces_method; body; end

# okish - valid syntax, but no ; makes it kind of hard to read
def some_method() body end

# good
def some_method
  body
end</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>One exception to the rule are empty-body methods.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># good
def no_op; end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="double-colons">
            <a class="anchor" href="#double-colons"></a>Double Colons</h3>
          <div class="paragraph">
            <p>Use <code>::</code> only to reference constants (this includes classes
              and modules) and constructors (like <code>Array()</code> or <code>Nokogiri::HTML()</code>).
              Do not use <code>::</code> for regular method invocation.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
SomeClass::some_method
some_object::some_method

# good
SomeClass.some_method
some_object.some_method
SomeModule::SomeClass::SOME_CONST
SomeModule::SomeClass()</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="colon-method-definition">
            <a class="anchor" href="#colon-method-definition"></a>Colon Method Definition</h3>
          <div class="paragraph">
            <p>Do not use <code>::</code> to define class methods.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class Foo
  def self::some_method
  end
end

# good
class Foo
  def self.some_method
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="method-parens">
            <a class="anchor" href="#method-parens"></a>Method Definition Parentheses</h3>
          <div class="paragraph">
            <p>Use <code>def</code> with parentheses when there are parameters. Omit
              the parentheses when the method doesn&#8217;t accept any parameters.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def some_method()
  # body omitted
end

# good
def some_method
  # body omitted
end

# bad
def some_method_with_parameters param1, param2
  # body omitted
end

# good
def some_method_with_parameters(param1, param2)
  # body omitted
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="method-invocation-parens">
            <a class="anchor" href="#method-invocation-parens"></a>Method Invocation Parentheses</h3>
          <div class="paragraph">
            <p>Use parentheses around the arguments of method invocations, especially
              if the first argument begins with an open parenthesis <code>(</code>,
              as in <code>f((3 + 2) + 1)</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
x = Math.sin y
# good
x = Math.sin(y)

# bad
array.delete e
# good
array.delete(e)

# bad
temperance = Person.new 'Temperance', 30
# good
temperance = Person.new('Temperance', 30)</code></pre>
            </div>
          </div>
          <div class="sect3">
            <h4 id="method-invocation-parens-no-args">
              <a class="anchor" href="#method-invocation-parens-no-args"></a>Method Calls with No Arguments</h4>
            <div class="paragraph">
              <p>Always omit parentheses for method calls with no arguments.</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
Kernel.exit!()
2.even?()
fork()
'test'.upcase()

# good
Kernel.exit!
2.even?
fork
'test'.upcase</code></pre>
              </div>
            </div>
          </div>
          <div class="sect3">
            <h4 id="method-invocation-parens-internal-dsl">
              <a class="anchor" href="#method-invocation-parens-internal-dsl"></a>Methods That are Part of an Internal DSL</h4>
            <div class="paragraph">
              <p>Always omit parentheses for methods that are part of an internal DSL
                (e.g., Rake, Rails, RSpec):</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
validates(:name, presence: true)
# good
validates :name, presence: true</code></pre>
              </div>
            </div>
          </div>
          <div class="sect3">
            <h4 id="method-invocation-parens-keyword">
              <a class="anchor" href="#method-invocation-parens-keyword"></a>Methods That Have "keyword" Status in Ruby</h4>
            <div class="paragraph">
              <p>Always omit parentheses for methods that have "keyword" status in Ruby.</p>
            </div>
            <div class="admonitionblock note">
              <table>
                <tr>
                  <td class="icon">
                    <div class="title">Note</div>
                  </td>
                  <td class="content">
                    Unfortunately, it&#8217;s not exactly clear <em>which</em> methods
                    have "keyword" status. There is agreement that declarative methods
                    have "keyword" status. However, there&#8217;s less agreement
                    on which non-declarative methods, if any, have "keyword" status.
                  </td>
                </tr>
              </table>
            </div>
            <div class="sect4">
              <h5 id="method-invocation-parens-declarative-keyword">
                <a class="anchor" href="#method-invocation-parens-declarative-keyword"></a>Declarative Methods That Have "keyword" Status in Ruby</h5>
              <div class="paragraph">
                <p>Always omit parentheses for declarative methods (a.k.a. DSL methods
                  or macro methods) that have "keyword" status in Ruby (e.g., various
                  <code>Module</code> instance methods):</p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Person
  # bad
  attr_reader(:name, :age)
  # good
  attr_reader :name, :age

  # body omitted
end</code></pre>
                </div>
              </div>
            </div>
            <div class="sect4">
              <h5 id="method-invocation-parens-non-declarative-keyword">
                <a class="anchor" href="#method-invocation-parens-non-declarative-keyword"></a>Non-Declarative Methods That Have "keyword" Status in Ruby</h5>
              <div class="paragraph">
                <p>For non-declarative methods with "keyword" status (e.g., various
                  <code>Kernel</code> instance methods), two styles are considered
                  acceptable. By far the most popular style is to omit parentheses.
                  Rationale: The code reads better, and method calls look more like
                  keywords. A less-popular style, but still acceptable, is to include
                  parentheses. Rationale: The methods have ordinary semantics, so
                  why treat them differently, and it&#8217;s easier to achieve a
                  uniform style by not worrying about which methods have "keyword"
                  status. Whichever one you pick, apply it consistently.</p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre class="highlight"><code class="language-ruby" data-lang="ruby"># good (most popular)
puts temperance.age
system 'ls'
exit 1

# also good (less popular)
puts(temperance.age)
system('ls')
exit(1)</code></pre>
                </div>
              </div>
            </div>
          </div>
          <div class="sect3">
            <h4 id="super-with-args">
              <a class="anchor" href="#super-with-args"></a>Using <code>super</code> with Arguments</h4>
            <div class="paragraph">
              <p>Always use parentheses when calling <code>super</code> with arguments:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
super name, age

# good
super(name, age)</code></pre>
              </div>
            </div>
            <div class="admonitionblock important">
              <table>
                <tr>
                  <td class="icon">
                    <div class="title">Important</div>
                  </td>
                  <td class="content">
                    When calling <code>super</code> without arguments, <code>super</code>                    and <code>super()</code> mean different things. Decide what is
                    appropriate for your usage.
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="too-many-params">
            <a class="anchor" href="#too-many-params"></a>Too Many Params</h3>
          <div class="paragraph">
            <p>Avoid parameter lists longer than three or four parameters.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="optional-arguments">
            <a class="anchor" href="#optional-arguments"></a>Optional Arguments</h3>
          <div class="paragraph">
            <p>Define optional arguments at the end of the list of arguments. Ruby has
              some unexpected results when calling methods that have optional arguments
              at the front of the list.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def some_method(a = 1, b = 2, c, d)
  puts "#{a}, #{b}, #{c}, #{d}"
end

some_method('w', 'x') # =&gt; '1, 2, w, x'
some_method('w', 'x', 'y') # =&gt; 'w, 2, x, y'
some_method('w', 'x', 'y', 'z') # =&gt; 'w, x, y, z'

# good
def some_method(c, d, a = 1, b = 2)
  puts "#{a}, #{b}, #{c}, #{d}"
end

some_method('w', 'x') # =&gt; '1, 2, w, x'
some_method('w', 'x', 'y') # =&gt; 'y, 2, w, x'
some_method('w', 'x', 'y', 'z') # =&gt; 'y, z, w, x'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="boolean-keyword-arguments">
            <a class="anchor" href="#boolean-keyword-arguments"></a>Boolean Keyword Arguments</h3>
          <div class="paragraph">
            <p>Use keyword arguments when passing boolean argument to a method.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def some_method(bar = false)
  puts bar
end

# bad - common hack before keyword args were introduced
def some_method(options = {})
  bar = options.fetch(:bar, false)
  puts bar
end

# good
def some_method(bar: false)
  puts bar
end

some_method            # =&gt; false
some_method(bar: true) # =&gt; true</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="keyword-arguments-vs-optional-arguments">
            <a class="anchor" href="#keyword-arguments-vs-optional-arguments"></a>Keyword Arguments vs Optional Arguments</h3>
          <div class="paragraph">
            <p>Prefer keyword arguments over optional arguments.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def some_method(a, b = 5, c = 1)
  # body omitted
end

# good
def some_method(a, b: 5, c: 1)
  # body omitted
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="keyword-arguments-vs-option-hashes">
            <a class="anchor" href="#keyword-arguments-vs-option-hashes"></a>Keyword Arguments vs Option Hashes</h3>
          <div class="paragraph">
            <p>Use keyword arguments instead of option hashes.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def some_method(options = {})
  bar = options.fetch(:bar, false)
  puts bar
end

# good
def some_method(bar: false)
  puts bar
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="arguments-forwarding">
            <a class="anchor" href="#arguments-forwarding"></a>Arguments Forwarding</h3>
          <div class="paragraph">
            <p>Use Ruby 2.7&#8217;s arguments forwarding.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def some_method(*args, &amp;block)
  other_method(*args, &amp;block)
end

# bad
def some_method(*args, **kwargs, &amp;block)
  other_method(*args, **kwargs, &amp;block)
end

# bad
# Please note that it can cause unexpected incompatible behavior
# because `...` forwards block also.
# https://github.com/rubocop-hq/rubocop/issues/7549
def some_method(*args)
  other_method(*args)
end

# good
def some_method(...)
  other_method(...)
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="private-global-methods">
            <a class="anchor" href="#private-global-methods"></a>Private Global Methods</h3>
          <div class="paragraph">
            <p>If you really need "global" methods, add them to Kernel and make them
              private.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="classes-modules">
        <a class="anchor" href="#classes-modules"></a>Classes &amp; Modules</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="consistent-classes">
            <a class="anchor" href="#consistent-classes"></a>Consistent Classes</h3>
          <div class="paragraph">
            <p>Use a consistent structure in your class definitions.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Person
  # extend and include go first
  extend SomeModule
  include AnotherModule

  # inner classes
  CustomError = Class.new(StandardError)

  # constants are next
  SOME_CONSTANT = 20

  # afterwards we have attribute macros
  attr_reader :name

  # followed by other macros (if any)
  validates :name

  # public class methods are next in line
  def self.some_method
  end

  # initialization goes between class methods and other instance methods
  def initialize
  end

  # followed by other public instance methods
  def some_method
  end

  # protected and private methods are grouped near the end
  protected

  def some_protected_method
  end

  private

  def some_private_method
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="mixin-grouping">
            <a class="anchor" href="#mixin-grouping"></a>Mixin Grouping</h3>
          <div class="paragraph">
            <p>Split multiple mixins into separate statements.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class Person
  include Foo, Bar
end

# good
class Person
  # multiple mixins go in separate statements
  include Foo
  include Bar
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="single-line-classes">
            <a class="anchor" href="#single-line-classes"></a>Single-line Classes</h3>
          <div class="paragraph">
            <p>Prefer a two-line format for class definitions with no body. It is easiest
              to read, understand, and modify.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
FooError = Class.new(StandardError)

# okish
class FooError &lt; StandardError; end

# ok
class FooError &lt; StandardError
end</code></pre>
            </div>
          </div>
          <div class="admonitionblock note">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Note</div>
                </td>
                <td class="content">
                  Many editors/tools will fail to understand properly the usage of <code>Class.new</code>.
                  Someone trying to locate the class definition might try a grep
                  "class FooError". A final difference is that the name of your class
                  is not available to the <code>inherited</code> callback of the
                  base class with the <code>Class.new</code> form. In general it&#8217;s
                  better to stick to the basic two-line style.
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="sect2">
          <h3 id="file-classes">
            <a class="anchor" href="#file-classes"></a>File Classes</h3>
          <div class="paragraph">
            <p>Don&#8217;t nest multi-line classes within classes. Try to have such
              nested classes each in their own file in a folder named like the containing
              class.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad

# foo.rb
class Foo
  class Bar
    # 30 methods inside
  end

  class Car
    # 20 methods inside
  end

  # 30 methods inside
end

# good

# foo.rb
class Foo
  # 30 methods inside
end

# foo/bar.rb
class Foo
  class Bar
    # 30 methods inside
  end
end

# foo/car.rb
class Foo
  class Car
    # 20 methods inside
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="namespace-definition">
            <a class="anchor" href="#namespace-definition"></a>Namespace Definition</h3>
          <div class="paragraph">
            <p>Define (and reopen) namespaced classes and modules using explicit nesting.
              Using the scope resolution operator can lead to surprising constant
              lookups due to Ruby&#8217;s <a href="https://cirw.in/blog/constant-lookup.html">lexical scoping</a>,
              which depends on the module nesting at the point of definition.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">module Utilities
  class Queue
  end
end

# bad
class Utilities::Store
  Module.nesting # =&gt; [Utilities::Store]

  def initialize
    # Refers to the top level ::Queue class because Utilities isn't in the
    # current nesting chain.
    @queue = Queue.new
  end
end

# good
module Utilities
  class WaitingList
    Module.nesting # =&gt; [Utilities::WaitingList, Utilities]

    def initialize
      @queue = Queue.new # Refers to Utilities::Queue
    end
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="modules-vs-classes">
            <a class="anchor" href="#modules-vs-classes"></a>Modules vs Classes</h3>
          <div class="paragraph">
            <p>Prefer modules to classes with only class methods. Classes should be
              used only when it makes sense to create instances out of them.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class SomeClass
  def self.some_method
    # body omitted
  end

  def self.some_other_method
    # body omitted
  end
end

# good
module SomeModule
  module_function

  def some_method
    # body omitted
  end

  def some_other_method
    # body omitted
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="module-function">
            <a class="anchor" href="#module-function"></a><code>module_function</code></h3>
          <div class="paragraph">
            <p>Prefer the use of <code>module_function</code> over <code>extend self</code>              when you want to turn a module&#8217;s instance methods into class
              methods.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
module Utilities
  extend self

  def parse_something(string)
    # do stuff here
  end

  def other_utility_method(number, string)
    # do some more stuff
  end
end

# good
module Utilities
  module_function

  def parse_something(string)
    # do stuff here
  end

  def other_utility_method(number, string)
    # do some more stuff
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="liskov">
            <a class="anchor" href="#liskov"></a>Liskov</h3>
          <div class="paragraph">
            <p>When designing class hierarchies make sure that they conform to the
              <a
                href="https://en.wikipedia.org/wiki/Liskov_substitution_principle">Liskov Substitution Principle</a>.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="solid-design">
            <a class="anchor" href="#solid-design"></a>SOLID design</h3>
          <div class="paragraph">
            <p>Try to make your classes as <a href="https://en.wikipedia.org/wiki/SOLID">SOLID</a>              as possible.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="define-to-s">
            <a class="anchor" href="#define-to-s"></a>Define <code>to_s</code></h3>
          <div class="paragraph">
            <p>Always supply a proper <code>to_s</code> method for classes that represent
              domain objects.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Person
  attr_reader :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end

  def to_s
    "#{first_name} #{last_name}"
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="attr_family">
            <a class="anchor" href="#attr_family"></a><code>attr</code> Family</h3>
          <div class="paragraph">
            <p>Use the <code>attr</code> family of functions to define trivial accessors
              or mutators.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class Person
  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end

  def first_name
    @first_name
  end

  def last_name
    @last_name
  end
end

# good
class Person
  attr_reader :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="accessor_mutator_method_names">
            <a class="anchor" href="#accessor_mutator_method_names"></a>Accessor/Mutator Method Names</h3>
          <div class="paragraph">
            <p>For accessors and mutators, avoid prefixing method names with <code>get_</code>              and <code>set_</code>. It is a Ruby convention to use attribute names
              for accessors (readers) and <code>attr_name=</code> for mutators (writers).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class Person
  def get_name
    "#{@first_name} #{@last_name}"
  end

  def set_name(name)
    @first_name, @last_name = name.split(' ')
  end
end

# good
class Person
  def name
    "#{@first_name} #{@last_name}"
  end

  def name=(name)
    @first_name, @last_name = name.split(' ')
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="attr">
            <a class="anchor" href="#attr"></a><code>attr</code></h3>
          <div class="paragraph">
            <p>Avoid the use of <code>attr</code>. Use <code>attr_reader</code> and
              <code>attr_accessor</code> instead.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - creates a single attribute accessor (deprecated in Ruby 1.9)
attr :something, true
attr :one, :two, :three # behaves as attr_reader

# good
attr_accessor :something
attr_reader :one, :two, :three</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="struct-new">
            <a class="anchor" href="#struct-new"></a><code>Struct.new</code></h3>
          <div class="paragraph">
            <p>Consider using <code>Struct.new</code>, which defines the trivial accessors,
              constructor and comparison operators for you.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># good
class Person
  attr_accessor :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end
end

# better
Person = Struct.new(:first_name, :last_name) do
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-extend-struct-new">
            <a class="anchor" href="#no-extend-struct-new"></a>Don&#8217;t Extend <code>Struct.new</code></h3>
          <div class="paragraph">
            <p>Don&#8217;t extend an instance initialized by <code>Struct.new</code>.
              Extending it introduces a superfluous class level and may also introduce
              weird errors if the file is required multiple times.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class Person &lt; Struct.new(:first_name, :last_name)
end

# good
Person = Struct.new(:first_name, :last_name)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="duck-typing">
            <a class="anchor" href="#duck-typing"></a>Duck Typing</h3>
          <div class="paragraph">
            <p>Prefer <a href="https://en.wikipedia.org/wiki/Duck_typing">duck-typing</a>              over inheritance.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
class Animal
  # abstract method
  def speak
  end
end

# extend superclass
class Duck &lt; Animal
  def speak
    puts 'Quack! Quack'
  end
end

# extend superclass
class Dog &lt; Animal
  def speak
    puts 'Bau! Bau!'
  end
end

# good
class Duck
  def speak
    puts 'Quack! Quack'
  end
end

class Dog
  def speak
    puts 'Bau! Bau!'
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-class-vars">
            <a class="anchor" href="#no-class-vars"></a>No Class Vars</h3>
          <div class="paragraph">
            <p>Avoid the usage of class (<code>@@</code>) variables due to their "nasty"
              behavior in inheritance.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Parent
  @@class_var = 'parent'

  def self.print_class_var
    puts @@class_var
  end
end

class Child &lt; Parent
  @@class_var = 'child'
end

Parent.print_class_var # =&gt; will print 'child'</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>As you can see all the classes in a class hierarchy actually share one
              class variable. Class instance variables should usually be preferred
              over class variables.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="visibility">
            <a class="anchor" href="#visibility"></a>Leverage Access Modifiers (e.g. <code>private</code> and <code>protected</code>)</h3>
          <div class="paragraph">
            <p>Assign proper visibility levels to methods (<code>private</code>, <code>protected</code>)
              in accordance with their intended usage. Don&#8217;t go off leaving
              everything <code>public</code> (which is the default).</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="indent-public-private-protected">
            <a class="anchor" href="#indent-public-private-protected"></a>Access Modifiers Indentation</h3>
          <div class="paragraph">
            <p>Indent the <code>public</code>, <code>protected</code>, and <code>private</code>              methods as much as the method definitions they apply to. Leave one
              blank line above the visibility modifier and one blank line below in
              order to emphasize that it applies to all methods below it.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># good
class SomeClass
  def public_method
    # some code
  end

  private

  def private_method
    # some code
  end

  def another_private_method
    # some code
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="def-self-class-methods">
            <a class="anchor" href="#def-self-class-methods"></a>Defining Class Methods</h3>
          <div class="paragraph">
            <p>Use <code>def self.method</code> to define class methods. This makes
              the code easier to refactor since the class name is not repeated.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class TestClass
  # bad
  def TestClass.some_method
    # body omitted
  end

  # good
  def self.some_other_method
    # body omitted
  end

  # Also possible and convenient when you
  # have to define many class methods.
  class &lt;&lt; self
    def first_method
      # body omitted
    end

    def second_method_etc
      # body omitted
    end
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="alias-method-lexically">
            <a class="anchor" href="#alias-method-lexically"></a>Alias Method Lexically</h3>
          <div class="paragraph">
            <p>Prefer <code>alias</code> when aliasing methods in lexical class scope
              as the resolution of <code>self</code> in this context is also lexical,
              and it communicates clearly to the user that the indirection of your
              alias will not be altered at runtime or by any subclass unless made
              explicit.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Westerner
  def first_name
    @names.first
  end

  alias given_name first_name
end</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>Since <code>alias</code>, like <code>def</code>, is a keyword, prefer
              bareword arguments over symbols or strings. In other words, do <code>alias foo bar</code>,
              not <code>alias :foo :bar</code>.</p>
          </div>
          <div class="paragraph">
            <p>Also be aware of how Ruby handles aliases and inheritance: an alias references
              the method that was resolved at the time the alias was defined; it
              is not dispatched dynamically.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Fugitive &lt; Westerner
  def first_name
    'Nobody'
  end
end</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>In this example, <code>Fugitive#given_name</code> would still call the
              original <code>Westerner#first_name</code> method, not <code>Fugitive#first_name</code>.
              To override the behavior of <code>Fugitive#given_name</code> as well,
              you&#8217;d have to redefine it in the derived class.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Fugitive &lt; Westerner
  def first_name
    'Nobody'
  end

  alias given_name first_name
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="alias-method">
            <a class="anchor" href="#alias-method"></a><code>alias_method</code></h3>
          <div class="paragraph">
            <p>Always use <code>alias_method</code> when aliasing methods of modules,
              classes, or singleton classes at runtime, as the lexical scope of <code>alias</code>              leads to unpredictability in these cases.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">module Mononymous
  def self.included(other)
    other.class_eval { alias_method :full_name, :given_name }
  end
end

class Sting &lt; Westerner
  include Mononymous
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="class-and-self">
            <a class="anchor" href="#class-and-self"></a>Class and <code>self</code></h3>
          <div class="paragraph">
            <p>When class (or module) methods call other such methods, omit the use
              of a leading <code>self</code> or own name followed by a <code>.</code>              when calling other such methods. This is often seen in "service classes"
              or other similar concepts where a class is treated as though it were
              a function. This convention tends to reduce repetitive boilerplate
              in such classes.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class TestClass
  # bad -- more work when class renamed/method moved
  def self.call(param1, param2)
    TestClass.new(param1).call(param2)
  end

  # bad -- more verbose than necessary
  def self.call(param1, param2)
    self.new(param1).call(param2)
  end

  # good
  def self.call(param1, param2)
    new(param1).call(param2)
  end

  # ...other methods...
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-constant-definition-in-block">
            <a class="anchor" href="#no-constant-definition-in-block"></a>Defining Constants within a Block</h3>
          <div class="paragraph">
            <p>Do not define constants within a block, since the block&#8217;s scope
              does not isolate or namespace the constant in any way.</p>
          </div>
          <div class="paragraph">
            <p>Define the constant outside of the block instead, or use a variable or
              method if defining the constant in the outer scope would be problematic.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - FILES_TO_LINT is now defined globally
task :lint do
  FILES_TO_LINT = Dir['lib/*.rb']
  # ...
end

# good - files_to_lint is only defined inside the block
task :lint do
  files_to_lint = Dir['lib/*.rb']
  # ...
end</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="classes-constructors">
        <a class="anchor" href="#classes-constructors"></a>Classes: Constructors</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="factory-methods">
            <a class="anchor" href="#factory-methods"></a>Factory Methods</h3>
          <div class="paragraph">
            <p>Consider adding factory methods to provide additional sensible ways to
              create instances of a particular class.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Person
  def self.create(options_hash)
    # body omitted
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="disjunctive-assignment-in-constructor">
            <a class="anchor" href="#disjunctive-assignment-in-constructor"></a>Disjunctive Assignment in Constructor</h3>
          <div class="paragraph">
            <p>In constructors, avoid unnecessary disjunctive assignment (<code>||=</code>)
              of instance variables. Prefer plain assignment. In ruby, instance variables
              (beginning with an <code>@</code>) are nil until assigned a value,
              so in most cases the disjunction is unnecessary.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def initialize
  @x ||= 1
end

# good
def initialize
  @x = 1
end</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="comments">
        <a class="anchor" href="#comments"></a>Comments</h2>
      <div class="sectionbody">
        <div class="quoteblock">
          <blockquote>
            <div class="paragraph">
              <p>Good code is its own best documentation. As you&#8217;re about to add
                a comment, ask yourself, "How can I improve the code so that this
                comment isn&#8217;t needed?". Improve the code and then document
                it to make it even clearer.</p>
            </div>
          </blockquote>
          <div class="attribution">
            &#8212; Steve McConnell
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-comments">
            <a class="anchor" href="#no-comments"></a>No Comments</h3>
          <div class="paragraph">
            <p>Write self-documenting code and ignore the rest of this section. Seriously!</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="rationale-comments">
            <a class="anchor" href="#rationale-comments"></a>Rationale Comments</h3>
          <div class="paragraph">
            <p>If the <em>how</em> can be made self-documenting, but not the <em>why</em>              (e.g. the code works around non-obvious library behavior, or implements
              an algorithm from an academic paper), add a comment explaining the
              rationale behind the code.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad

x = BuggyClass.something.dup

def compute_dependency_graph
  ...30 lines of recursive graph merging...
end

# good

# BuggyClass returns an internal object, so we have to dup it to modify it.
x = BuggyClass.something.dup

# This is algorithm 6.4(a) from Worf &amp; Yar's _Amazing Graph Algorithms_ (2243).
def compute_dependency_graph
  ...30 lines of recursive graph merging...
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="english-comments">
            <a class="anchor" href="#english-comments"></a>English Comments</h3>
          <div class="paragraph">
            <p>Write comments in English.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="hash-space">
            <a class="anchor" href="#hash-space"></a>Hash Space</h3>
          <div class="paragraph">
            <p>Use one space between the leading <code>#</code> character of the comment
              and the text of the comment.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="english-syntax">
            <a class="anchor" href="#english-syntax"></a>English Syntax</h3>
          <div class="paragraph">
            <p>Comments longer than a word are capitalized and use punctuation. Use
              <a href="https://en.wikipedia.org/wiki/Sentence_spacing">one space</a>              after periods.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-superfluous-comments">
            <a class="anchor" href="#no-superfluous-comments"></a>No Superfluous Comments</h3>
          <div class="paragraph">
            <p>Avoid superfluous comments.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
counter += 1 # Increments counter by one.</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="comment-upkeep">
            <a class="anchor" href="#comment-upkeep"></a>Comment Upkeep</h3>
          <div class="paragraph">
            <p>Keep existing comments up-to-date. An outdated comment is worse than
              no comment at all.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="refactor-dont-comment">
            <a class="anchor" href="#refactor-dont-comment"></a>Refactor, Don&#8217;t Comment</h3>
          <div class="quoteblock">
            <blockquote>
              <div class="paragraph">
                <p>Good code is like a good joke: it needs no explanation.</p>
              </div>
            </blockquote>
            <div class="attribution">
              &#8212; old programmers maxim<br>
              <cite><a href="https://eloquentruby.com/blog/2011/03/07/good-code-and-good-jokes/">through Russ Olsen</a></cite>
            </div>
          </div>
          <div class="paragraph">
            <p>Avoid writing comments to explain bad code. Refactor the code to make
              it self-explanatory. ("Do or do not - there is no try." Yoda)</p>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="comment-annotations">
        <a class="anchor" href="#comment-annotations"></a>Comment Annotations</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="annotate-above">
            <a class="anchor" href="#annotate-above"></a>Annotations Placement</h3>
          <div class="paragraph">
            <p>Annotations should usually be written on the line immediately above the
              relevant code.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def bar
  baz(:quux) # FIXME: This has crashed occasionally since v3.2.1.
end

# good
def bar
  # FIXME: This has crashed occasionally since v3.2.1.
  baz(:quux)
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="annotate-keywords">
            <a class="anchor" href="#annotate-keywords"></a>Annotations Keyword Format</h3>
          <div class="paragraph">
            <p>The annotation keyword is followed by a colon and a space, then a note
              describing the problem.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def bar
  # FIXME This has crashed occasionally since v3.2.1.
  baz(:quux)
end

# good
def bar
  # FIXME: This has crashed occasionally since v3.2.1.
  baz(:quux)
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="indent-annotations">
            <a class="anchor" href="#indent-annotations"></a>Multi-line Annotations Indentation</h3>
          <div class="paragraph">
            <p>If multiple lines are required to describe the problem, subsequent lines
              should be indented three spaces after the <code>#</code> (one general
              plus two for indentation purpose).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">def bar
  # FIXME: This has crashed occasionally since v3.2.1. It may
  #   be related to the BarBazUtil upgrade.
  baz(:quux)
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="rare-eol-annotations">
            <a class="anchor" href="#rare-eol-annotations"></a>Inline Annotations</h3>
          <div class="paragraph">
            <p>In cases where the problem is so obvious that any documentation would
              be redundant, annotations may be left at the end of the offending line
              with no note. This usage should be the exception and not the rule.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">def bar
  sleep 100 # OPTIMIZE
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="todo">
            <a class="anchor" href="#todo"></a><code>TODO</code></h3>
          <div class="paragraph">
            <p>Use <code>TODO</code> to note missing features or functionality that
              should be added at a later date.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="fixme">
            <a class="anchor" href="#fixme"></a><code>FIXME</code></h3>
          <div class="paragraph">
            <p>Use <code>FIXME</code> to note broken code that needs to be fixed.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="optimize">
            <a class="anchor" href="#optimize"></a><code>OPTIMIZE</code></h3>
          <div class="paragraph">
            <p>Use <code>OPTIMIZE</code> to note slow or inefficient code that may cause
              performance problems.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="hack">
            <a class="anchor" href="#hack"></a><code>HACK</code></h3>
          <div class="paragraph">
            <p>Use <code>HACK</code> to note code smells where questionable coding practices
              were used and should be refactored away.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="review">
            <a class="anchor" href="#review"></a><code>REVIEW</code></h3>
          <div class="paragraph">
            <p>Use <code>REVIEW</code> to note anything that should be looked at to
              confirm it is working as intended. For example: <code>REVIEW: Are we sure this is how the client does X currently?</code></p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="document-annotations">
            <a class="anchor" href="#document-annotations"></a>Document Annotations</h3>
          <div class="paragraph">
            <p>Use other custom annotation keywords if it feels appropriate, but be
              sure to document them in your project&#8217;s <code>README</code> or
              similar.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="magic-comments">
        <a class="anchor" href="#magic-comments"></a>Magic Comments</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="magic-comments-first">
            <a class="anchor" href="#magic-comments-first"></a>Magic Comments First</h3>
          <div class="paragraph">
            <p>Place magic comments above all code and documentation in a file (except
              shebangs, which are discussed next).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
# Some documentation about Person

# frozen_string_literal: true
class Person
end

# good
# frozen_string_literal: true

# Some documentation about Person
class Person
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="below-shebang">
            <a class="anchor" href="#below-shebang"></a>Below Shebang</h3>
          <div class="paragraph">
            <p>Place magic comments below shebangs when they are present in a file.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
# frozen_string_literal: true
#!/usr/bin/env ruby

App.parse(ARGV)

# good
#!/usr/bin/env ruby
# frozen_string_literal: true

App.parse(ARGV)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="one-magic-comment-per-line">
            <a class="anchor" href="#one-magic-comment-per-line"></a>One Magic Comment per Line</h3>
          <div class="paragraph">
            <p>Use one magic comment per line if you need multiple.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
# -*- frozen_string_literal: true; encoding: ascii-8bit -*-

# good
# frozen_string_literal: true
# encoding: ascii-8bit</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="separate-magic-comments-from-code">
            <a class="anchor" href="#separate-magic-comments-from-code"></a>Separate Magic Comments from Code</h3>
          <div class="paragraph">
            <p>Separate magic comments from code and documentation with a blank line.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
# frozen_string_literal: true
# Some documentation for Person
class Person
  # Some code
end

# good
# frozen_string_literal: true

# Some documentation for Person
class Person
  # Some code
end</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="collections">
        <a class="anchor" href="#collections"></a>Collections</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="literal-array-hash">
            <a class="anchor" href="#literal-array-hash"></a>Literal Array and Hash</h3>
          <div class="paragraph">
            <p>Prefer literal array and hash creation notation (unless you need to pass
              parameters to their constructors, that is).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
arr = Array.new
hash = Hash.new

# good
arr = []
arr = Array.new(10)
hash = {}
hash = Hash.new(0)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="percent-w">
            <a class="anchor" href="#percent-w"></a><code>%w</code></h3>
          <div class="paragraph">
            <p>Prefer <code>%w</code> to the literal array syntax when you need an array
              of words (non-empty strings without spaces and special characters in
              them). Apply this rule only to arrays with two or more elements.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
STATES = ['draft', 'open', 'closed']

# good
STATES = %w[draft open closed]</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="percent-i">
            <a class="anchor" href="#percent-i"></a><code>%i</code></h3>
          <div class="paragraph">
            <p>Prefer <code>%i</code> to the literal array syntax when you need an array
              of symbols (and you don&#8217;t need to maintain Ruby 1.9 compatibility).
              Apply this rule only to arrays with two or more elements.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
STATES = [:draft, :open, :closed]

# good
STATES = %i[draft open closed]</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-trailing-array-commas">
            <a class="anchor" href="#no-trailing-array-commas"></a>No Trailing Array Commas</h3>
          <div class="paragraph">
            <p>Avoid comma after the last item of an <code>Array</code> or <code>Hash</code>              literal, especially when the items are not on separate lines.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - easier to move/add/remove items, but still not preferred
VALUES = [
           1001,
           2020,
           3333,
         ]

# bad
VALUES = [1001, 2020, 3333, ]

# good
VALUES = [1001, 2020, 3333]</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-gappy-arrays">
            <a class="anchor" href="#no-gappy-arrays"></a>No Gappy Arrays</h3>
          <div class="paragraph">
            <p>Avoid the creation of huge gaps in arrays.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">arr = []
arr[100] = 1 # now you have an array with lots of nils</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="first-and-last">
            <a class="anchor" href="#first-and-last"></a><code>first</code> and <code>last</code></h3>
          <div class="paragraph">
            <p>When accessing the first or last element from an array, prefer <code>first</code>              or <code>last</code> over <code>[0]</code> or <code>[-1]</code>.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="set-vs-array">
            <a class="anchor" href="#set-vs-array"></a>Set vs Array</h3>
          <div class="paragraph">
            <p>Use <code>Set</code> instead of <code>Array</code> when dealing with
              unique elements.
              <code>Set</code> implements a collection of unordered values with no
              duplicates. This is a hybrid of <code>Array</code>'s intuitive inter-operation
              facilities and <code>Hash</code>'s fast lookup.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="symbols-as-keys">
            <a class="anchor" href="#symbols-as-keys"></a>Symbols as Keys</h3>
          <div class="paragraph">
            <p>Prefer symbols instead of strings as hash keys.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
hash = { 'one' =&gt; 1, 'two' =&gt; 2, 'three' =&gt; 3 }

# good
hash = { one: 1, two: 2, three: 3 }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-mutable-keys">
            <a class="anchor" href="#no-mutable-keys"></a>No Mutable Keys</h3>
          <div class="paragraph">
            <p>Avoid the use of mutable objects as hash keys.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="hash-literals">
            <a class="anchor" href="#hash-literals"></a>Hash Literals</h3>
          <div class="paragraph">
            <p>Use the Ruby 1.9 hash literal syntax when your hash keys are symbols.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
hash = { :one =&gt; 1, :two =&gt; 2, :three =&gt; 3 }

# good
hash = { one: 1, two: 2, three: 3 }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="hash-literal-as-last-array-item">
            <a class="anchor" href="#hash-literal-as-last-array-item"></a>Hash Literal as Last Array Item</h3>
          <div class="paragraph">
            <p>Wrap hash literal in braces if it is a last array item.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
[1, 2, one: 1, two: 2]

# good
[1, 2, { one: 1, two: 2 }]</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-mixed-hash-syntaxes">
            <a class="anchor" href="#no-mixed-hash-syntaxes"></a>No Mixed Hash Syntaxes</h3>
          <div class="paragraph">
            <p>Don&#8217;t mix the Ruby 1.9 hash syntax with hash rockets in the same
              hash literal. When you&#8217;ve got keys that are not symbols stick
              to the hash rockets syntax.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
{ a: 1, 'b' =&gt; 2 }

# good
{ :a =&gt; 1, 'b' =&gt; 2 }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="hash-key">
            <a class="anchor" href="#hash-key"></a><code>Hash#key?</code></h3>
          <div class="paragraph">
            <p>Use <code>Hash#key?</code> instead of <code>Hash#has_key?</code> and
              <code>Hash#value?</code> instead of <code>Hash#has_value?</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
hash.has_key?(:test)
hash.has_value?(value)

# good
hash.key?(:test)
hash.value?(value)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="hash-each">
            <a class="anchor" href="#hash-each"></a><code>Hash#each</code></h3>
          <div class="paragraph">
            <p>Use <code>Hash#each_key</code> instead of <code>Hash#keys.each</code>              and <code>Hash#each_value</code> instead of <code>Hash#values.each</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
hash.keys.each { |k| p k }
hash.values.each { |v| p v }
hash.each { |k, _v| p k }
hash.each { |_k, v| p v }

# good
hash.each_key { |k| p k }
hash.each_value { |v| p v }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="hash-fetch">
            <a class="anchor" href="#hash-fetch"></a><code>Hash#fetch</code></h3>
          <div class="paragraph">
            <p>Use <code>Hash#fetch</code> when dealing with hash keys that should be
              present.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">heroes = { batman: 'Bruce Wayne', superman: 'Clark Kent' }
# bad - if we make a mistake we might not spot it right away
heroes[:batman] # =&gt; 'Bruce Wayne'
heroes[:supermann] # =&gt; nil

# good - fetch raises a KeyError making the problem obvious
heroes.fetch(:supermann)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="hash-fetch-defaults">
            <a class="anchor" href="#hash-fetch-defaults"></a><code>Hash#fetch</code> defaults</h3>
          <div class="paragraph">
            <p>Introduce default values for hash keys via <code>Hash#fetch</code> as
              opposed to using custom logic.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">batman = { name: 'Bruce Wayne', is_evil: false }

# bad - if we just use || operator with falsy value we won't get the expected result
batman[:is_evil] || true # =&gt; true

# good - fetch works correctly with falsy values
batman.fetch(:is_evil, true) # =&gt; false</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="use-hash-blocks">
            <a class="anchor" href="#use-hash-blocks"></a>Use Hash Blocks</h3>
          <div class="paragraph">
            <p>Prefer the use of the block instead of the default value in <code>Hash#fetch</code>              if the code that has to be evaluated may have side effects or be expensive.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">batman = { name: 'Bruce Wayne' }

# bad - if we use the default value, we eager evaluate it
# so it can slow the program down if done multiple times
batman.fetch(:powers, obtain_batman_powers) # obtain_batman_powers is an expensive call

# good - blocks are lazy evaluated, so only triggered in case of KeyError exception
batman.fetch(:powers) { obtain_batman_powers }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="hash-values-at">
            <a class="anchor" href="#hash-values-at"></a><code>Hash#values_at</code></h3>
          <div class="paragraph">
            <p>Use <code>Hash#values_at</code> when you need to retrieve several values
              consecutively from a hash.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
email = data['email']
username = data['nickname']

# good
email, username = data.values_at('email', 'nickname')</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="hash-transform-methods">
            <a class="anchor" href="#hash-transform-methods"></a><code>Hash#transform_keys</code> and <code>Hash#transform_values</code></h3>
          <div class="paragraph">
            <p>Prefer <code>transform_keys</code> or <code>transform_values</code> over
              <code>each_with_object</code> or <code>map</code> when transforming
              just the keys or just the values of a hash.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
{a: 1, b: 2}.each_with_object({}) { |(k, v), h| h[k] = v * v }
{a: 1, b: 2}.map { |k, v| [k.to_s, v] }.to_h

# good
{a: 1, b: 2}.transform_values { |v| v * v }
{a: 1, b: 2}.transform_keys { |k| k.to_s }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="ordered-hashes">
            <a class="anchor" href="#ordered-hashes"></a>Ordered Hashes</h3>
          <div class="paragraph">
            <p>Rely on the fact that as of Ruby 1.9 hashes are ordered.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-modifying-collections">
            <a class="anchor" href="#no-modifying-collections"></a>No Modifying Collections</h3>
          <div class="paragraph">
            <p>Do not modify a collection while traversing it.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="accessing-elements-directly">
            <a class="anchor" href="#accessing-elements-directly"></a>Accessing Elements Directly</h3>
          <div class="paragraph">
            <p>When accessing elements of a collection, avoid direct access via <code>[n]</code>              by using an alternate form of the reader method if it is supplied.
              This guards you from calling <code>[]</code> on <code>nil</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
Regexp.last_match[1]

# good
Regexp.last_match(1)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="provide-alternate-accessor-to-collections">
            <a class="anchor" href="#provide-alternate-accessor-to-collections"></a>Provide Alternate Accessor to Collections</h3>
          <div class="paragraph">
            <p>When providing an accessor for a collection, provide an alternate form
              to save users from checking for <code>nil</code> before accessing an
              element in the collection.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def awesome_things
  @awesome_things
end

# good
def awesome_things(index = nil)
  if index &amp;&amp; @awesome_things
    @awesome_things[index]
  else
    @awesome_things
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="map-find-select-reduce-include-size">
            <a class="anchor" href="#map-find-select-reduce-include-size"></a><code>map</code>/<code>find</code>/<code>select</code>/<code>reduce</code>/<code>include?</code>/<code>size</code></h3>
          <div class="paragraph">
            <p>Prefer <code>map</code> over <code>collect</code>, <code>find</code>              over <code>detect</code>, <code>select</code> over <code>find_all</code>,
              <code>reduce</code> over <code>inject</code>, <code>include?</code>              over <code>member?</code> and <code>size</code> over <code>length</code>.
              This is not a hard requirement; if the use of the alias enhances readability,
              it&#8217;s ok to use it. The rhyming methods are inherited from Smalltalk
              and are not common in other programming languages. The reason the use
              of <code>select</code> is encouraged over <code>find_all</code> is
              that it goes together nicely with <code>reject</code> and its name
              is pretty self-explanatory.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="count-vs-size">
            <a class="anchor" href="#count-vs-size"></a><code>count</code> vs <code>size</code></h3>
          <div class="paragraph">
            <p>Don&#8217;t use <code>count</code> as a substitute for <code>size</code>.
              For <code>Enumerable</code> objects other than <code>Array</code> it
              will iterate the entire collection in order to determine its size.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
some_hash.count

# good
some_hash.size</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="flat-map">
            <a class="anchor" href="#flat-map"></a><code>flat_map</code></h3>
          <div class="paragraph">
            <p>Use <code>flat_map</code> instead of <code>map</code> + <code>flatten</code>.
              This does not apply for arrays with a depth greater than 2, i.e. if
              <code>users.first.songs == ['a', ['b','c']]</code>, then use <code>map + flatten</code>              rather than <code>flat_map</code>.
              <code>flat_map</code> flattens the array by 1, whereas <code>flatten</code>              flattens it all the way.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
all_songs = users.map(&amp;:songs).flatten.uniq

# good
all_songs = users.flat_map(&amp;:songs).uniq</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="reverse-each">
            <a class="anchor" href="#reverse-each"></a><code>reverse_each</code></h3>
          <div class="paragraph">
            <p>Prefer <code>reverse_each</code> to <code>reverse.each</code> because
              some classes that <code>include Enumerable</code> will provide an efficient
              implementation. Even in the worst case where a class does not provide
              a specialized implementation, the general implementation inherited
              from <code>Enumerable</code> will be at least as efficient as using
              <code>reverse.each</code>.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
array.reverse.each { ... }

# good
array.reverse_each { ... }</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="numbers">
        <a class="anchor" href="#numbers"></a>Numbers</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="underscores-in-numerics">
            <a class="anchor" href="#underscores-in-numerics"></a>Underscores in Numerics</h3>
          <div class="paragraph">
            <p>Add underscores to large numeric literals to improve their readability.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - how many 0s are there?
num = 1000000

# good - much easier to parse for the human brain
num = 1_000_000</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="numeric-literal-prefixes">
            <a class="anchor" href="#numeric-literal-prefixes"></a>Numeric Literal Prefixes</h3>
          <div class="paragraph">
            <p>Prefer lowercase letters for numeric literal prefixes.
              <code>0o</code> for octal, <code>0x</code> for hexadecimal and <code>0b</code>              for binary. Do not use <code>0d</code> prefix for decimal literals.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
num = 01234
num = 0O1234
num = 0X12AB
num = 0B10101
num = 0D1234
num = 0d1234

# good - easier to separate digits from the prefix
num = 0o1234
num = 0x12AB
num = 0b10101
num = 1234</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="integer-type-checking">
            <a class="anchor" href="#integer-type-checking"></a>Integer Type Checking</h3>
          <div class="paragraph">
            <p>Use <code>Integer</code> to check type of an integer number. Since <code>Fixnum</code>              is platform-dependent, checking against it will return different results
              on 32-bit and 64-bit machines.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">timestamp = Time.now.to_i

# bad
timestamp.is_a?(Fixnum)
timestamp.is_a?(Bignum)

# good
timestamp.is_a?(Integer)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="random-numbers">
            <a class="anchor" href="#random-numbers"></a>Random Numbers</h3>
          <div class="paragraph">
            <p>Prefer to use ranges when generating random numbers instead of integers
              with offsets, since it clearly states your intentions. Imagine simulating
              a roll of a dice:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
rand(6) + 1

# good
rand(1..6)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="float-division">
            <a class="anchor" href="#float-division"></a>Float Division</h3>
          <div class="paragraph">
            <p>When performing float-division on two integers, either use <code>fdiv</code>              or convert one-side integer to float.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
a.to_f / b.to_f

# good
a.to_f / b
a / b.to_f
a.fdiv(b)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="float-comparison">
            <a class="anchor" href="#float-comparison"></a>Float Comparison</h3>
          <div class="paragraph">
            <p>Avoid (in)equality comparisons of floats as they are unreliable.</p>
          </div>
          <div class="paragraph">
            <p>Floating point values are inherently inaccurate, and comparing them for
              exact equality is almost never the desired semantics. Comparison via
              the <code>==/!=</code> operators checks floating-point value representation
              to be exactly the same, which is very unlikely if you perform any arithmetic
              operations involving precision loss.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
x == 0.1
x != 0.1

# good - using BigDecimal
x.to_d == 0.1.to_d

# good - not an actual float comparison
x == Float::INFINITY

# good
(x - 0.1).abs &lt; Float::EPSILON

# good
tolerance = 0.0001
(x - 0.1).abs &lt; tolerance

# Or some other epsilon based type of comparison:
# https://www.embeddeduse.com/2019/08/26/qt-compare-two-floats/</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="exponential-notation">
            <a class="anchor" href="#exponential-notation"></a>Exponential Notation</h3>
          <div class="paragraph">
            <p>When using exponential notation for numbers, prefer using the normalized
              scientific notation, which uses a mantissa between 1 (inclusive) and
              10 (exclusive). Omit the exponent altogether if it is zero.</p>
          </div>
          <div class="paragraph">
            <p>The goal is to avoid confusion between powers of ten and exponential
              notation, as one quickly reading <code>10e7</code> could think it&#8217;s
              10 to the power of 7 (one then 7 zeroes) when it&#8217;s actually 10
              to the power of 8 (one then 8 zeroes). If you want 10 to the power
              of 7, you should do <code>1e7</code>.</p>
          </div>
          <div class="paragraph">
            <p>| power notation | exponential notation | output | |----------------|----------------------|----------|
              | 10 <strong> 7        | 1e7                  | 10000000 |
| 10 </strong> 6 | 1e6 | 1000000 | | 10 ** 7 | 10e6 | 10000000 |</p>
          </div>
          <div class="paragraph">
            <p>One could favor the alternative engineering notation, in which the exponent
              must always be a multiple of 3 for easy conversion to the thousand
              / million / &#8230;&#8203; system.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
10e6
0.3e4
11.7e5
3.14e0

# good
1e7
3e3
1.17e6
3.14</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>Alternative : engineering notation:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
3.2e7
0.1e5
12e4

# good
1e6
17e6
0.98e9</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="strings">
        <a class="anchor" href="#strings"></a>Strings</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="string-interpolation">
            <a class="anchor" href="#string-interpolation"></a>String Interpolation</h3>
          <div class="paragraph">
            <p>Prefer string interpolation and string formatting to string concatenation:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
email_with_name = user.name + ' &lt;' + user.email + '&gt;'

# good
email_with_name = "#{user.name} &lt;#{user.email}&gt;"

# good
email_with_name = format('%s &lt;%s&gt;', user.name, user.email)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="consistent-string-literals">
            <a class="anchor" href="#consistent-string-literals"></a>Consistent String Literals</h3>
          <div class="paragraph">
            <p>Adopt a consistent string literal quoting style. There are two popular
              styles in the Ruby community, both of which are considered good - single
              quotes by default and double quotes by default.</p>
          </div>
          <div class="admonitionblock note">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Note</div>
                </td>
                <td class="content">
                  The string literals in this guide are using single quotes by default.
                </td>
              </tr>
            </table>
          </div>
          <div class="sect3">
            <h4 id="consistent-string-literals-single-quote">
              <a class="anchor" href="#consistent-string-literals-single-quote"></a>Single Quote</h4>
            <div class="paragraph">
              <p>Prefer single-quoted strings when you don&#8217;t need string interpolation
                or special symbols such as <code>\t</code>, <code>\n</code>, <code>'</code>,
                etc.</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
name = "Bozhidar"

name = 'De\'Andre'

# good
name = 'Bozhidar'

name = "De'Andre"</code></pre>
              </div>
            </div>
          </div>
          <div class="sect3">
            <h4 id="consistent-string-literals-double-quote">
              <a class="anchor" href="#consistent-string-literals-double-quote"></a>Double Quote</h4>
            <div class="paragraph">
              <p>Prefer double-quotes unless your string literal contains " or escape
                characters you want to suppress.</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
name = 'Bozhidar'

sarcasm = "I \"like\" it."

# good
name = "Bozhidar"

sarcasm = 'I "like" it.'</code></pre>
              </div>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-character-literals">
            <a class="anchor" href="#no-character-literals"></a>No Character Literals</h3>
          <div class="paragraph">
            <p>Don&#8217;t use the character literal syntax <code>?x</code>. Since Ruby
              1.9 it&#8217;s basically redundant - <code>?x</code> would be interpreted
              as <code>'x'</code> (a string with a single character in it).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
char = ?c

# good
char = 'c'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="curlies-interpolate">
            <a class="anchor" href="#curlies-interpolate"></a>Curlies Interpolate</h3>
          <div class="paragraph">
            <p>Don&#8217;t leave out <code>{}</code> around instance and global variables
              being interpolated into a string.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">class Person
  attr_reader :first_name, :last_name

  def initialize(first_name, last_name)
    @first_name = first_name
    @last_name = last_name
  end

  # bad - valid, but awkward
  def to_s
    "#@first_name #@last_name"
  end

  # good
  def to_s
    "#{@first_name} #{@last_name}"
  end
end

$global = 0
# bad
puts "$global = #$global"

# good
puts "$global = #{$global}"</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-to-s">
            <a class="anchor" href="#no-to-s"></a>No <code>to_s</code></h3>
          <div class="paragraph">
            <p>Don&#8217;t use <code>Object#to_s</code> on interpolated objects. It&#8217;s
              invoked on them automatically.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
message = "This is the #{result.to_s}."

# good
message = "This is the #{result}."</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="concat-strings">
            <a class="anchor" href="#concat-strings"></a>String Concatenation</h3>
          <div class="paragraph">
            <p>Avoid using <code>String#+</code> when you need to construct large data
              chunks. Instead, use <code>String#&lt;&lt;</code>. Concatenation mutates
              the string instance in-place and is always faster than <code>String#+</code>,
              which creates a bunch of new string objects.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
html = ''
html += '&lt;h1&gt;Page title&lt;/h1&gt;'

paragraphs.each do |paragraph|
  html += "&lt;p&gt;#{paragraph}&lt;/p&gt;"
end

# good and also fast
html = ''
html &lt;&lt; '&lt;h1&gt;Page title&lt;/h1&gt;'

paragraphs.each do |paragraph|
  html &lt;&lt; "&lt;p&gt;#{paragraph}&lt;/p&gt;"
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="dont-abuse-gsub">
            <a class="anchor" href="#dont-abuse-gsub"></a>Don&#8217;t Abuse <code>gsub</code></h3>
          <div class="paragraph">
            <p>Don&#8217;t use <code>String#gsub</code> in scenarios in which you can
              use a faster and more specialized alternative.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">url = 'http://example.com'
str = 'lisp-case-rules'

# bad
url.gsub('http://', 'https://')
str.gsub('-', '_')

# good
url.sub('http://', 'https://')
str.tr('-', '_')</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="sprintf">
            <a class="anchor" href="#sprintf"></a><code>sprintf</code></h3>
          <div class="paragraph">
            <p>Prefer the use of <code>sprintf</code> and its alias <code>format</code>              over the fairly cryptic <code>String#%</code> method.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
'%d %d' % [20, 10]
# =&gt; '20 10'

# good
sprintf('%d %d', 20, 10)
# =&gt; '20 10'

# good
sprintf('%&lt;first&gt;d %&lt;second&gt;d', first: 20, second: 10)
# =&gt; '20 10'

format('%d %d', 20, 10)
# =&gt; '20 10'

# good
format('%&lt;first&gt;d %&lt;second&gt;d', first: 20, second: 10)
# =&gt; '20 10'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="named-format-tokens">
            <a class="anchor" href="#named-format-tokens"></a>Named Format Tokens</h3>
          <div class="paragraph">
            <p>When using named format string tokens, favor <code>%&lt;name&gt;s</code>              over <code>%{name}</code> because it encodes information about the
              type of the value.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
format('Hello, %{name}', name: 'John')

# good
format('Hello, %&lt;name&gt;s', name: 'John')</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="heredoc-long-strings">
            <a class="anchor" href="#heredoc-long-strings"></a>Long Strings</h3>
          <div class="paragraph">
            <p>Break long strings into multiple lines but don&#8217;t concatenate them
              with <code>+</code>. If you want to add newlines, use heredoc. Otherwise
              use <code>\</code>:</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
"Lorem Ipsum is simply dummy text of the printing and typesetting industry. " +
"Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, " +
"when an unknown printer took a galley of type and scrambled it to make a type specimen book."

# good
&lt;&lt;~LOREM
  Lorem Ipsum is simply dummy text of the printing and typesetting industry.
  Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,
  when an unknown printer took a galley of type and scrambled it to make a type specimen book.
LOREM

# good
"Lorem Ipsum is simply dummy text of the printing and typesetting industry. "\
"Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, "\
"when an unknown printer took a galley of type and scrambled it to make a type specimen book."</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="heredocs">
        <a class="anchor" href="#heredocs"></a>Heredocs</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="squiggly-heredocs">
            <a class="anchor" href="#squiggly-heredocs"></a>Squiggly Heredocs</h3>
          <div class="paragraph">
            <p>Use Ruby 2.3&#8217;s squiggly heredocs for nicely indented multi-line
              strings.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - using Powerpack String#strip_margin
code = &lt;&lt;-RUBY.strip_margin('|')
  |def test
  |  some_method
  |  other_method
  |end
RUBY

# also bad
code = &lt;&lt;-RUBY
def test
  some_method
  other_method
end
RUBY

# good
code = &lt;&lt;~RUBY
  def test
    some_method
    other_method
  end
RUBY</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="heredoc-delimiters">
            <a class="anchor" href="#heredoc-delimiters"></a>Heredoc Delimiters</h3>
          <div class="paragraph">
            <p>Use descriptive delimiters for heredocs. Delimiters add valuable information
              about the heredoc content, and as an added bonus some editors can highlight
              code within heredocs if the correct delimiter is used.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
code = &lt;&lt;~END
  def foo
    bar
  end
END

# good
code = &lt;&lt;~RUBY
  def foo
    bar
  end
RUBY

# good
code = &lt;&lt;~SUMMARY
  An imposing black structure provides a connection between the past and
  the future in this enigmatic adaptation of a short story by revered
  sci-fi author Arthur C. Clarke.
SUMMARY</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="heredoc-method-calls">
            <a class="anchor" href="#heredoc-method-calls"></a>Heredoc Method Calls</h3>
          <div class="paragraph">
            <p>Place method calls with heredoc receivers on the first line of the heredoc
              definition. The bad form has significant potential for error if a new
              line is added or removed.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
query = &lt;&lt;~SQL
  select foo from bar
SQL
.strip_indent

# good
query = &lt;&lt;~SQL.strip_indent
  select foo from bar
SQL</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="heredoc-argument-closing-parentheses">
            <a class="anchor" href="#heredoc-argument-closing-parentheses"></a>Heredoc Argument Closing Parentheses</h3>
          <div class="paragraph">
            <p>Place the closing parenthesis for method calls with heredoc arguments
              on the first line of the heredoc definition. The bad form has potential
              for error if the new line before the closing parenthesis is removed.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
foo(&lt;&lt;~SQL
  select foo from bar
SQL
)

# good
foo(&lt;&lt;~SQL)
  select foo from bar
SQL</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="date-time">
        <a class="anchor" href="#date-time"></a>Date &amp; Time</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="time-now">
            <a class="anchor" href="#time-now"></a><code>Time.now</code></h3>
          <div class="paragraph">
            <p>Prefer <code>Time.now</code> over <code>Time.new</code> when retrieving
              the current system time.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-datetime">
            <a class="anchor" href="#no-datetime"></a>No <code>DateTime</code></h3>
          <div class="paragraph">
            <p>Don&#8217;t use <code>DateTime</code> unless you need to account for
              historical calendar reform - and if you do, explicitly specify the
              <code>start</code> argument to clearly state your intentions.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - uses DateTime for current time
DateTime.now

# good - uses Time for current time
Time.now

# bad - uses DateTime for modern date
DateTime.iso8601('2016-06-29')

# good - uses Date for modern date
Date.iso8601('2016-06-29')

# good - uses DateTime with start argument for historical date
DateTime.iso8601('1751-04-23', Date::ENGLAND)</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="regular-expressions">
        <a class="anchor" href="#regular-expressions"></a>Regular Expressions</h2>
      <div class="sectionbody">
        <div class="quoteblock">
          <blockquote>
            <div class="paragraph">
              <p>Some people, when confronted with a problem, think "I know, I&#8217;ll
                use regular expressions." Now they have two problems.</p>
            </div>
          </blockquote>
          <div class="attribution">
            &#8212; Jamie Zawinski
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-regexp-for-plaintext">
            <a class="anchor" href="#no-regexp-for-plaintext"></a>Plain Text Search</h3>
          <div class="paragraph">
            <p>Don&#8217;t use regular expressions if you just need plain text search
              in string.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">foo = 'I am an example string'

# bad - using a regular expression is an overkill here
foo ~= /example/

# good
foo['example']</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="regexp-string-index">
            <a class="anchor" href="#regexp-string-index"></a>Using Regular Expressions as String Indexes</h3>
          <div class="paragraph">
            <p>For simple constructions you can use regexp directly through string index.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">match = string[/regexp/]             # get content of matched regexp
first_group = string[/text(grp)/, 1] # get content of captured group
string[/text (grp)/, 1] = 'replace'  # string =&gt; 'text replace'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="non-capturing-regexp">
            <a class="anchor" href="#non-capturing-regexp"></a>Prefer Non-capturing Groups</h3>
          <div class="paragraph">
            <p>Use non-capturing groups when you don&#8217;t use the captured result.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
/(first|second)/

# good
/(?:first|second)/</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="do-not-mix-named-and-numbered-captures">
            <a class="anchor" href="#do-not-mix-named-and-numbered-captures"></a>Do not mix named and numbered captures</h3>
          <div class="paragraph">
            <p>Do not mix named captures and numbered captures in a Regexp literal.
              Because numbered capture is ignored if they&#8217;re mixed.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad - There is no way to access `(BAR)` capturing.
m = /(?&lt;foo&gt;FOO)(BAR)/.match('FOOBAR')
p m[:foo] # =&gt; "FOO"
p m[1]    # =&gt; "FOO"
p m[2]    # =&gt; nil   - not "BAR"

# good - Both captures are accessible with names.
m = /(?&lt;foo&gt;FOO)(?&lt;bar&gt;BAR)/.match('FOOBAR')
p m[:foo] # =&gt; "FOO"
p m[:bar] # =&gt; "BAR"

# good - `(?:BAR)` is non-capturing grouping.
m = /(?&lt;foo&gt;FOO)(?:BAR)/.match('FOOBAR')
p m[:foo] # =&gt; "FOO"

# good - Both captures are accessible with numbers.
m = /(FOO)(BAR)/.match('FOOBAR')
p m[1] # =&gt; "FOO"
p m[2] # =&gt; "BAR"</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="refer-named-regexp-captures-by-name">
            <a class="anchor" href="#refer-named-regexp-captures-by-name"></a>Refer named regexp captures by name</h3>
          <div class="paragraph">
            <p>Prefer using names to refer named regexp captures instead of numbers.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
m = /(?&lt;foo&gt;FOO)(?&lt;bar&gt;BAR)/.match('FOOBAR')
p m[1] # =&gt; "FOO"
p m[2] # =&gt; "BAR"

# good
m = /(?&lt;foo&gt;FOO)(?&lt;bar&gt;BAR)/.match('FOOBAR')
p m[:foo] # =&gt; "FOO"
p m[:bar] # =&gt; "BAR"</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-perl-regexp-last-matchers">
            <a class="anchor" href="#no-perl-regexp-last-matchers"></a>Avoid Perl-style Last Regular Expression Group Matchers</h3>
          <div class="paragraph">
            <p>Don&#8217;t use the cryptic Perl-legacy variables denoting last regexp
              group matches (<code>$1</code>, <code>$2</code>, etc). Use <code>Regexp.last_match(n)</code>              instead.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">/(regexp)/ =~ string
...

# bad
process $1

# good
process Regexp.last_match(1)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-numbered-regexes">
            <a class="anchor" href="#no-numbered-regexes"></a>Avoid Numbered Groups</h3>
          <div class="paragraph">
            <p>Avoid using numbered groups as it can be hard to track what they contain.
              Named groups can be used instead.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
/(regexp)/ =~ string
# some code
process Regexp.last_match(1)

# good
/(?&lt;meaningful_var&gt;regexp)/ =~ string
# some code
process meaningful_var</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="limit-escapes">
            <a class="anchor" href="#limit-escapes"></a>Limit Escapes</h3>
          <div class="paragraph">
            <p>Character classes have only a few special characters you should care
              about: <code>^</code>, <code>-</code>, <code>\</code>, <code>]</code>,
              so don&#8217;t escape <code>.</code> or brackets in <code>[]</code>.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="caret-and-dollar-regexp">
            <a class="anchor" href="#caret-and-dollar-regexp"></a>Caret and Dollar Regexp</h3>
          <div class="paragraph">
            <p>Be careful with <code>^</code> and <code>$</code> as they match start/end
              of line, not string endings. If you want to match the whole string
              use: <code>\A</code> and <code>\z</code> (not to be confused with <code>\Z</code>              which is the equivalent of <code>/\n?\z/</code>).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">string = "some injection\nusername"
string[/^username$/]   # matches
string[/\Ausername\z/] # doesn't match</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="multi-line-regexes">
            <a class="anchor" href="#multi-line-regexes"></a>Multi-line Regular Expressions</h3>
          <div class="paragraph">
            <p>Use <code>x</code> (free-spacing) modifier for multi-line regexps.</p>
          </div>
          <div class="admonitionblock note">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Note</div>
                </td>
                <td class="content">
                  That&#8217;s known as <a href="https://www.regular-expressions.info/freespacing.html">free-spacing mode</a>.
                  In this mode leading and trailing whitespace is ignored.
                </td>
              </tr>
            </table>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
regex = /start\
\s\
(group)\
(?:alt1|alt2)\
end/

# good
regexp = /
  start
  \s
  (group)
  (?:alt1|alt2)
  end
/x</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="comment-regexes">
            <a class="anchor" href="#comment-regexes"></a>Comment Complex Regular Expressions</h3>
          <div class="paragraph">
            <p>Use <code>x</code> modifier for complex regexps. This makes them more
              readable and you can add some useful comments.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">regexp = /
  start         # some text
  \s            # white space char
  (group)       # first group
  (?:alt1|alt2) # some alternation
  end
/x</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="gsub-blocks">
            <a class="anchor" href="#gsub-blocks"></a>Use <code>gsub</code> with a Block or a Hash for Complex Replacements</h3>
          <div class="paragraph">
            <p>For complex replacements <code>sub</code>/<code>gsub</code> can be used
              with a block or a hash.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">words = 'foo bar'
words.sub(/f/, 'f' =&gt; 'F') # =&gt; 'Foo bar'
words.gsub(/\w+/) { |word| word.capitalize } # =&gt; 'Foo Bar'</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="percent-literals">
        <a class="anchor" href="#percent-literals"></a>Percent Literals</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="percent-q-shorthand">
            <a class="anchor" href="#percent-q-shorthand"></a><code>%q</code> shorthand</h3>
          <div class="paragraph">
            <p>Use <code>%()</code> (it&#8217;s a shorthand for <code>%Q</code>) for
              single-line strings which require both interpolation and embedded double-quotes.
              For multi-line strings, prefer heredocs.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad (no interpolation needed)
%(&lt;div class="text"&gt;Some text&lt;/div&gt;)
# should be '&lt;div class="text"&gt;Some text&lt;/div&gt;'

# bad (no double-quotes)
%(This is #{quality} style)
# should be "This is #{quality} style"

# bad (multiple lines)
%(&lt;div&gt;\n&lt;span class="big"&gt;#{exclamation}&lt;/span&gt;\n&lt;/div&gt;)
# should be a heredoc.

# good (requires interpolation, has quotes, single line)
%(&lt;tr&gt;&lt;td class="name"&gt;#{name}&lt;/td&gt;)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="percent-q">
            <a class="anchor" href="#percent-q"></a><code>%q</code></h3>
          <div class="paragraph">
            <p>Avoid <code>%()</code> or the equivalent <code>%q()</code> unless you
              have a string with both <code>'</code> and <code>"</code> in it. Regular
              string literals are more readable and should be preferred unless a
              lot of characters would have to be escaped in them.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
name = %q(Bruce Wayne)
time = %q(8 o'clock)
question = %q("What did you say?")

# good
name = 'Bruce Wayne'
time = "8 o'clock"
question = '"What did you say?"'
quote = %q(&lt;p class='quote'&gt;"What did you say?"&lt;/p&gt;)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="percent-r">
            <a class="anchor" href="#percent-r"></a><code>%r</code></h3>
          <div class="paragraph">
            <p>Use <code>%r</code> only for regular expressions matching <em>at least</em>              one <code>/</code> character.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
%r{\s+}

# good
%r{^/(.*)$}
%r{^/blog/2011/(.*)$}</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="percent-x">
            <a class="anchor" href="#percent-x"></a><code>%x</code></h3>
          <div class="paragraph">
            <p>Avoid the use of <code>%x</code> unless you&#8217;re going to invoke
              a command with backquotes in it (which is rather unlikely).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
date = %x(date)

# good
date = `date`
echo = %x(echo `date`)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="percent-s">
            <a class="anchor" href="#percent-s"></a><code>%s</code></h3>
          <div class="paragraph">
            <p>Avoid the use of <code>%s</code>. It seems that the community has decided
              <code>:"some string"</code> is the preferred way to create a symbol
              with spaces in it.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="percent-literal-braces">
            <a class="anchor" href="#percent-literal-braces"></a>Percent Literal Braces</h3>
          <div class="paragraph">
            <p>Use the braces that are the most appropriate for the various kinds of
              percent literals.</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p><code>()</code> for string literals (<code>%q</code>, <code>%Q</code>).</p>
              </li>
              <li>
                <p><code>[]</code> for array literals (<code>%w</code>, <code>%i</code>,
                  <code>%W</code>, <code>%I</code>) as it is aligned with the standard
                  array literals.</p>
              </li>
              <li>
                <p><code>{}</code> for regexp literals (<code>%r</code>) since parentheses
                  often appear inside regular expressions. That&#8217;s why a less
                  common character with <code>{</code> is usually the best delimiter
                  for <code>%r</code> literals.</p>
              </li>
              <li>
                <p><code>()</code> for all other literals (e.g. <code>%s</code>, <code>%x</code>)</p>
              </li>
            </ul>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
%q{"Test's king!", John said.}

# good
%q("Test's king!", John said.)

# bad
%w(one two three)
%i(one two three)

# good
%w[one two three]
%i[one two three]

# bad
%r((\w+)-(\d+))
%r{\w{1,2}\d{2,5}}

# good
%r{(\w+)-(\d+)}
%r|\w{1,2}\d{2,5}|</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="metaprogramming">
        <a class="anchor" href="#metaprogramming"></a>Metaprogramming</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="no-needless-metaprogramming">
            <a class="anchor" href="#no-needless-metaprogramming"></a>No Needless Metaprogramming</h3>
          <div class="paragraph">
            <p>Avoid needless metaprogramming.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-monkey-patching">
            <a class="anchor" href="#no-monkey-patching"></a>No Monkey Patching</h3>
          <div class="paragraph">
            <p>Do not mess around in core classes when writing libraries (do not monkey-patch
              them).</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="block-class-eval">
            <a class="anchor" href="#block-class-eval"></a>Block <code>class_eval</code></h3>
          <div class="paragraph">
            <p>The block form of <code>class_eval</code> is preferable to the string-interpolated
              form.</p>
          </div>
          <div class="sect3">
            <h4 id="class-eval-supply-location">
              <a class="anchor" href="#class-eval-supply-location"></a>Supply Location</h4>
            <div class="paragraph">
              <p>When you use the string-interpolated form, always supply <code>__FILE__</code>                and <code>__LINE__</code>, so that your backtraces make sense:</p>
            </div>
            <div class="listingblock">
              <div class="content">
                <pre class="highlight"><code class="language-ruby" data-lang="ruby">class_eval 'def use_relative_model_naming?; true; end', __FILE__, __LINE__</code></pre>
              </div>
            </div>
          </div>
          <div class="sect3">
            <h4 id="class-eval-define_method">
              <a class="anchor" href="#class-eval-define_method"></a><code>define_method</code></h4>
            <div class="paragraph">
              <p><code>define_method</code> is preferable to <code>class_eval { def &#8230;&#8203; }</code></p>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="eval-comment-docs">
            <a class="anchor" href="#eval-comment-docs"></a><code>eval</code> Comment Docs</h3>
          <div class="paragraph">
            <p>When using <code>class_eval</code> (or other <code>eval</code>) with
              string interpolation, add a comment block showing its appearance if
              interpolated (a practice used in Rails code):</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># from activesupport/lib/active_support/core_ext/string/output_safety.rb
UNSAFE_STRING_METHODS.each do |unsafe_method|
  if 'String'.respond_to?(unsafe_method)
    class_eval &lt;&lt;-EOT, __FILE__, __LINE__ + 1
      def #{unsafe_method}(*params, &amp;block)       # def capitalize(*params, &amp;block)
        to_str.#{unsafe_method}(*params, &amp;block)  #   to_str.capitalize(*params, &amp;block)
      end                                         # end

      def #{unsafe_method}!(*params)              # def capitalize!(*params)
        @dirty = true                             #   @dirty = true
        super                                     #   super
      end                                         # end
    EOT
  end
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-method-missing">
            <a class="anchor" href="#no-method-missing"></a>No <code>method_missing</code></h3>
          <div class="paragraph">
            <p>Avoid using <code>method_missing</code> for metaprogramming because backtraces
              become messy, the behavior is not listed in <code>#methods</code>,
              and misspelled method calls might silently work, e.g. <code>nukes.luanch_state = false</code>.
              Consider using delegation, proxy, or <code>define_method</code> instead.
              If you must use <code>method_missing</code>:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>Be sure to <a href="https://blog.marc-andre.ca/2010/11/15/methodmissing-politely/">also define <code>respond_to_missing?</code></a></p>
              </li>
              <li>
                <p>Only catch methods with a well-defined prefix, such as <code>find_by_*</code>--make
                  your code as assertive as possible.</p>
              </li>
              <li>
                <p>Call <code>super</code> at the end of your statement</p>
              </li>
              <li>
                <p>Delegate to assertive, non-magical methods:</p>
              </li>
            </ul>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
def method_missing(meth, *params, &amp;block)
  if /^find_by_(?&lt;prop&gt;.*)/ =~ meth
    # ... lots of code to do a find_by
  else
    super
  end
end

# good
def method_missing(meth, *params, &amp;block)
  if /^find_by_(?&lt;prop&gt;.*)/ =~ meth
    find_by(prop, *params, &amp;block)
  else
    super
  end
end

# best of all, though, would to define_method as each findable attribute is declared</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="prefer-public-send">
            <a class="anchor" href="#prefer-public-send"></a>Prefer <code>public_send</code></h3>
          <div class="paragraph">
            <p>Prefer <code>public_send</code> over <code>send</code> so as not to circumvent
              <code>private</code>/<code>protected</code> visibility.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># We have an ActiveModel Organization that includes concern Activatable
module Activatable
  extend ActiveSupport::Concern

  included do
    before_create :create_token
  end

  private

  def reset_token
    # some code
  end

  def create_token
    # some code
  end

  def activate!
    # some code
  end
end

class Organization &lt; ActiveRecord::Base
  include Activatable
end

linux_organization = Organization.find(...)
# BAD - violates privacy
linux_organization.send(:reset_token)
# GOOD - should throw an exception
linux_organization.public_send(:reset_token)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="prefer-__send__">
            <a class="anchor" href="#prefer-__send__"></a>Prefer <code>__send__</code></h3>
          <div class="paragraph">
            <p>Prefer <code>__send__</code> over <code>send</code>, as <code>send</code>              may overlap with existing methods.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">require 'socket'

u1 = UDPSocket.new
u1.bind('127.0.0.1', 4913)
u2 = UDPSocket.new
u2.connect('127.0.0.1', 4913)
# Won't send a message to the receiver obj.
# Instead it will send a message via UDP socket.
u2.send :sleep, 0
# Will actually send a message to the receiver obj.
u2.__send__ ...</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="api-documentation">
        <a class="anchor" href="#api-documentation"></a>API Documentation</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="yard">
            <a class="anchor" href="#yard"></a>YARD</h3>
          <div class="paragraph">
            <p>Use <a href="https://yardoc.org/">YARD</a> and its conventions for API
              documentation.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-block-comments">
            <a class="anchor" href="#no-block-comments"></a>RD (Block) Comments</h3>
          <div class="paragraph">
            <p>Don&#8217;t use block comments. They cannot be preceded by whitespace
              and are not as easy to spot as regular comments.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
=begin
comment line
another comment line
=end

# good
# comment line
# another comment line</code></pre>
            </div>
          </div>
          <div class="sidebarblock">
            <div class="content">
              <div class="title">From Perl&#8217;s POD to RD</div>
              <div class="paragraph">
                <p>This is not a really a block comment syntax, but more of an attempt
                  to emulate Perl&#8217;s <a href="https://perldoc.perl.org/perlpod.html">POD</a>                  documentation system.</p>
              </div>
              <div class="paragraph">
                <p>There&#8217;s an <a href="https://github.com/uwabami/rdtool">rdtool</a>                  for Ruby that&#8217;s pretty similar to POD. Basically <code>rdtool</code>                  scans a file for <code>=begin</code> and <code>=end</code> pairs,
                  and extracts the text between them all. This text is assumed to
                  be documentation in
                  <a href="https://github.com/uwabami/rdtool/blob/master/doc/rd-draft.rd">RD format</a>.
                  You can read more about it
                  <a href="https://ruby-doc.com/docs/ProgrammingRuby/html/rdtool.html">here</a>.</p>
              </div>
              <div class="paragraph">
                <p>RD predated the rise of RDoc and YARD and was effectively obsoleted
                  by them.<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnote_3" title="View footnote.">3</a>]</sup></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="gemfile-and-gemspec">
        <a class="anchor" href="#gemfile-and-gemspec"></a>Gemfile and Gemspec</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="no-ruby-version-in-the-gemspec">
            <a class="anchor" href="#no-ruby-version-in-the-gemspec"></a>No <code>RUBY_VERSION</code> in the gemspec</h3>
          <div class="paragraph">
            <p>The gemspec should not contain <code>RUBY_VERSION</code> as a condition
              to switch dependencies.
              <code>RUBY_VERSION</code> is determined by <code>rake release</code>,
              so users may end up with wrong dependency.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
Gem::Specification.new do |s|
  if RUBY_VERSION &gt;= '2.5'
    s.add_runtime_dependency 'gem_a'
  else
    s.add_runtime_dependency 'gem_b'
  end
end</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>Fix by either:</p>
          </div>
          <div class="ulist">
            <ul>
              <li>
                <p>Post-install messages.</p>
              </li>
              <li>
                <p>Add both gems as dependency (if permissible).</p>
              </li>
              <li>
                <p>If development dependencies, move to Gemfile.</p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="misc">
        <a class="anchor" href="#misc"></a>Misc</h2>
      <div class="sectionbody">
        <div class="sect2">
          <h3 id="no-flip-flops">
            <a class="anchor" href="#no-flip-flops"></a>No Flip-flops</h3>
          <div class="paragraph">
            <p>Avoid the use of flip-flops.</p>
          </div>
          <div class="admonitionblock note">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Note</div>
                </td>
                <td class="content">
                  They are deprecated as of Ruby 2.6.
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-non-nil-checks">
            <a class="anchor" href="#no-non-nil-checks"></a>No non-<code>nil</code> Checks</h3>
          <div class="paragraph">
            <p>Don&#8217;t do explicit non-<code>nil</code> checks unless you&#8217;re
              dealing with boolean values.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
do_something if !something.nil?
do_something if something != nil

# good
do_something if something

# good - dealing with a boolean
def value_set?
  !@some_boolean.nil?
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="global-stdout">
            <a class="anchor" href="#global-stdout"></a>Global Input/Output Streams</h3>
          <div class="paragraph">
            <p>Use <code>$stdout/$stderr/$stdin</code> instead of <code>STDOUT/STDERR/STDIN</code>.
              <code>STDOUT/STDERR/STDIN</code> are constants, and while you can actually
              reassign (possibly to redirect some stream) constants in Ruby, you&#8217;ll
              get an interpreter warning if you do so.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
STDOUT.puts('hello')

hash = { out: STDOUT, key: value }

def m(out = STDOUT)
  out.puts('hello')
end

# good
$stdout.puts('hello')

hash = { out: $stdout, key: value }

def m(out = $stdout)
  out.puts('hello')
end</code></pre>
            </div>
          </div>
          <div class="admonitionblock note">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Note</div>
                </td>
                <td class="content">
                  The only valid use-case for the stream constants is obtaining references to the original
                  streams (assuming you&#8217;ve redirected some of the global vars).
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="sect2">
          <h3 id="warn">
            <a class="anchor" href="#warn"></a>Warn</h3>
          <div class="paragraph">
            <p>Use <code>warn</code> instead of <code>$stderr.puts</code>. Apart from
              being more concise and clear, <code>warn</code> allows you to suppress
              warnings if you need to (by setting the warn level to 0 via <code>-W0</code>).</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
$stderr.puts 'This is a warning!'

# good
warn 'This is a warning!'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="array-join">
            <a class="anchor" href="#array-join"></a><code>Array#join</code></h3>
          <div class="paragraph">
            <p>Prefer the use of <code>Array#join</code> over the fairly cryptic <code>Array#*</code>              with a string argument.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
%w[one two three] * ', '
# =&gt; 'one, two, three'

# good
%w[one two three].join(', ')
# =&gt; 'one, two, three'</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="array-coercion">
            <a class="anchor" href="#array-coercion"></a>Array Coercion</h3>
          <div class="paragraph">
            <p>Use <code>Array()</code> instead of explicit <code>Array</code> check
              or <code>[*var]</code>, when dealing with a variable you want to treat
              as an Array, but you&#8217;re not certain it&#8217;s an array.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
paths = [paths] unless paths.is_a?(Array)
paths.each { |path| do_something(path) }

# bad (always creates a new Array instance)
[*paths].each { |path| do_something(path) }

# good (and a bit more readable)
Array(paths).each { |path| do_something(path) }</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="ranges-or-between">
            <a class="anchor" href="#ranges-or-between"></a>Ranges or <code>between</code></h3>
          <div class="paragraph">
            <p>Use ranges or <code>Comparable#between?</code> instead of complex comparison
              logic when possible.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
do_something if x &gt;= 1000 &amp;&amp; x &lt;= 2000

# good
do_something if (1000..2000).include?(x)

# good
do_something if x.between?(1000, 2000)</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="predicate-methods">
            <a class="anchor" href="#predicate-methods"></a>Predicate Methods</h3>
          <div class="paragraph">
            <p>Prefer the use of predicate methods to explicit comparisons with <code>==</code>.
              Numeric comparisons are OK.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
if x % 2 == 0
end

if x % 2 == 1
end

if x == nil
end

# good
if x.even?
end

if x.odd?
end

if x.nil?
end

if x.zero?
end

if x == 0
end</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-cryptic-perlisms">
            <a class="anchor" href="#no-cryptic-perlisms"></a>No Cryptic Perlisms</h3>
          <div class="paragraph">
            <p>Avoid using Perl-style special variables (like <code>$:</code>, <code>$;</code>,
              etc). They are quite cryptic and their use in anything but one-liner
              scripts is discouraged.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
$:.unshift File.dirname(__FILE__)

# good
$LOAD_PATH.unshift File.dirname(__FILE__)</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>Use the human-friendly aliases provided by the <code>English</code> library
              if required.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
print $', $$

# good
require 'English'
print $POSTMATCH, $PID</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="use-code-require_relative-code-whenever-possible">
            <a class="anchor" href="#use-code-require_relative-code-whenever-possible"></a>Use <code>require_relative</code> whenever possible</h3>
          <div class="paragraph">
            <p>For all your internal dependencies, you should use <code>require_relative</code>.
              Use of <code>require</code> should be reserved for external dependencies</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
require 'set'
require 'my_gem/spec/helper'
require 'my_gem/lib/something'

# good
require 'set'
require_relative 'helper'
require_relative '../lib/something'</code></pre>
            </div>
          </div>
          <div class="paragraph">
            <p>This way is more expressive (making clear which dependency is internal
              or not) and more efficient (as <code>require_relative</code> doesn&#8217;t
              have to try all of <code>$LOAD_PATH</code> contrary to <code>require</code>).</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="always-warn">
            <a class="anchor" href="#always-warn"></a>Always Warn</h3>
          <div class="paragraph">
            <p>Write <code>ruby -w</code> safe code.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-optional-hash-params">
            <a class="anchor" href="#no-optional-hash-params"></a>No Optional Hash Params</h3>
          <div class="paragraph">
            <p>Avoid hashes as optional parameters. Does the method do too much? (Object
              initializers are exceptions for this rule).</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="instance-vars">
            <a class="anchor" href="#instance-vars"></a>Instance Vars</h3>
          <div class="paragraph">
            <p>Use module instance variables instead of global variables.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
$foo_bar = 1

# good
module Foo
  class &lt;&lt; self
    attr_accessor :bar
  end
end

Foo.bar = 1</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="optionparser">
            <a class="anchor" href="#optionparser"></a><code>OptionParser</code></h3>
          <div class="paragraph">
            <p>Use <code>OptionParser</code> for parsing complex command line options
              and <code>ruby -s</code> for trivial command line options.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-param-mutations">
            <a class="anchor" href="#no-param-mutations"></a>No Param Mutations</h3>
          <div class="paragraph">
            <p>Do not mutate parameters unless that is the purpose of the method.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="three-is-the-number-thou-shalt-count">
            <a class="anchor" href="#three-is-the-number-thou-shalt-count"></a>Three is the Number Thou Shalt Count</h3>
          <div class="paragraph">
            <p>Avoid more than three levels of block nesting.</p>
          </div>
        </div>
        <div class="sect2">
          <h3 id="functional-code">
            <a class="anchor" href="#functional-code"></a>Functional Code</h3>
          <div class="paragraph">
            <p>Code in a functional way, avoiding mutation when that makes sense.</p>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby">a = []; [1, 2, 3].each { |i| a &lt;&lt; i * 2 }   # bad
a = [1, 2, 3].map { |i| i * 2 }             # good

a = {}; [1, 2, 3].each { |i| a[i] = i * 17 }                # bad
a = [1, 2, 3].reduce({}) { |h, i| h[i] = i * 17; h }        # good
a = [1, 2, 3].each_with_object({}) { |i, h| h[i] = i * 17 } # good</code></pre>
            </div>
          </div>
        </div>
        <div class="sect2">
          <h3 id="no-explicit-rb-to-require">
            <a class="anchor" href="#no-explicit-rb-to-require"></a>No explicit <code>.rb</code> to <code>require</code></h3>
          <div class="paragraph">
            <p>Omit the <code>.rb</code> extension for filename passed to <code>require</code>              and <code>require_relative</code>.</p>
          </div>
          <div class="admonitionblock note">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Note</div>
                </td>
                <td class="content">
                  If the extension is omitted, Ruby tries adding '.rb', '.so', and so on to the name
                  until found. If the file named cannot be found, a <code>LoadError</code>                  will be raised. There is an edge case where <code>foo.so</code>                  file is loaded instead of a <code>LoadError</code> if <code>foo.so</code>                  file exists when <code>require 'foo.rb'</code> will be changed
                  to <code>require 'foo'</code>, but that seems harmless.
                </td>
              </tr>
            </table>
          </div>
          <div class="listingblock">
            <div class="content">
              <pre class="highlight"><code class="language-ruby" data-lang="ruby"># bad
require 'foo.rb'
require_relative '../foo.rb'

# good
require 'foo'
require 'foo.so'
require_relative '../foo'
require_relative '../foo.so'</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sect1">
      <h2 id="tools">
        <a class="anchor" href="#tools"></a>Tools</h2>
      <div class="sectionbody">
        <div class="paragraph">
          <p>Here are some tools to help you automatically check Ruby code against this
            guide.</p>
        </div>
        <div class="sect2">
          <h3 id="rubocop">
            <a class="anchor" href="#rubocop"></a>RuboCop</h3>
          <div class="paragraph">
            <p><a href="https://github.com/rubocop-hq/rubocop">RuboCop</a> is a Ruby
              static code analyzer and formatter, based on this style guide. RuboCop
              already covers a significant portion of the guide and has <a href="https://docs.rubocop.org/rubocop/integration_with_other_tools.html">plugins</a>              for most popular Ruby editors and IDEs.</p>
          </div>
          <div class="admonitionblock tip">
            <table>
              <tr>
                <td class="icon">
                  <div class="title">Tip</div>
                </td>
                <td class="content">
                  RuboCop&#8217;s cops (code checks) have links to the guidelines that they are based
                  on, as part of their metadata.
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="sect2">
          <h3 id="rubymine">
            <a class="anchor" href="#rubymine"></a>RubyMine</h3>
          <div class="paragraph">
            <p><a href="https://www.jetbrains.com/ruby/">RubyMine</a>'s code inspections
              are <a href="https://confluence.jetbrains.com/display/RUBYDEV/RubyMine+Inspections">partially based</a>              on this guide.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="footnotes">
    <hr>
    <div class="footnote" id="_footnote_1">
      <a href="#_footnoteref_1">1</a>. Occasionally we might suggest to the reader
      to consider some alternatives, though.
    </div>
    <div class="footnote" id="_footnote_2">
      <a href="#_footnoteref_2">2</a>. *BSD/Solaris/Linux/macOS users are covered
      by default, Windows users have to be extra careful.
    </div>
    <div class="footnote" id="_footnote_3">
      <a href="#_footnoteref_3">3</a>. According to this <a href="https://en.wikipedia.org/wiki/Ruby_Document_format">Wikipedia article</a>      the format used to be popular until the early 2000s when it was superseded
      by RDoc.
    </div>
  </div>
</body>

</html>